{"version":3,"sources":["webpack:///webpack/bootstrap 943bec7d46ce9ea7e055","webpack:///../~/regenerator/runtime.js","webpack:///../app/server/main.jsx","webpack:///../app/server/services/BotService.jsx","webpack:///../app/server/collections/Games.jsx","webpack:///../app/common/helpers/assignProps.jsx","webpack:///../app/common/helpers/capitalize.jsx","webpack:///../app/server/collections/GameBoards.jsx","webpack:///../app/common/models/GameBoard.jsx","webpack:///../app/common/models/Tile.jsx","webpack:///../app/common/models/Questions.jsx","webpack:///../app/common/models/questions/OrderQuestion.jsx","webpack:///../app/common/models/questions/Marker.jsx","webpack:///../app/common/helpers/generateId.jsx","webpack:///../app/common/models/GameStatus.jsx","webpack:///../app/server/collections/JoinRequests.jsx","webpack:///../app/server/services/JoinRequestService.jsx","webpack:///../app/server/server.jsx","webpack:///../app/server/collections/GameFetches.jsx","webpack:///../app/server/services/GameCreatorService.jsx","webpack:///../app/common/helpers/querystring.jsx","webpack:///../app/server/helpers/http.jsx","webpack:///../app/server/repositories/GameRepository.jsx","webpack:///../app/server/repositories/GameFetchRepository.jsx","webpack:///../app/server/repositories/GameBoardRepository.jsx","webpack:///../app/common/collections/Friends.jsx","webpack:///../app/common/models/Friend.jsx","webpack:///../app/client/scripts/Routes.jsx","webpack:///../app/server/services/GameService.jsx","webpack:///../app/server/repositories/JoinRequestRepository.jsx","webpack:///../app/server/services/verification/AnswerVerificationService.jsx","webpack:///../app/server/services/verification/TimelineVerificationService.jsx","webpack:///../app/server/services/verification/MultipleChoiceVerificationService.jsx","webpack:///../app/server/services/verification/ReorderVerificationService.jsx","webpack:///../app/server/services/verification/GeoVerificationService.jsx","webpack:///../app/server/services/BoardStateService.jsx","webpack:///../app/server/services/GamestatsService.jsx","webpack:///../app/common/collections/Gamestats.jsx","webpack:///../app/server/repositories/GamestatsRepository.jsx","webpack:///../app/common/helpers/findIndex.jsx","webpack:///../app/server/services/AnswerService.jsx","webpack:///../app/server/services.jsx","webpack:///../app/server/facebook.jsx","webpack:///../app/server/repositories/FriendRepository.jsx","webpack:///../app/server/repositories/UserRepository.jsx","webpack:///../app/server/publish.jsx","webpack:///../app/server/methods.jsx"],"names":[],"mappings":";;;;;;;AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;;;;;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,iBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAc;AACd,MAAK;AACL,eAAc;AACd;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA,YAAW;AACX;;AAEA;AACA;AACA,yCAAwC,WAAW;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,UAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,4BAA2B;AAC3B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAS;AACT;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,YAAW;AACX;AACA;;AAEA,UAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,UAAS;AACT;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;;AAEA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,kCAAiC,kBAAkB;AACnD;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,kBAAiB;;AAEjB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,yBAAwB,iBAAiB;AACzC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,aAAY;AACZ;AACA;;AAEA;AACA,aAAY;AACZ;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,+CAA8C,QAAQ;AACtD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAa;AACb;AACA;;AAEA,YAAW;AACX;AACA;AACA;;AAEA,YAAW;AACX;AACA;AACA;;AAEA,YAAW;AACX;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA,+CAA8C,QAAQ;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,QAAO;AACP;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA,QAAO;AACP;AACA;AACA,MAAK;;AAEL;AACA,+CAA8C,QAAQ;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA,+CAA8C,QAAQ;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;AClpBA,SAAQ,GAAR,CAAY,qBAAZ,EAAmC,QAAQ,GAAR,CAAY,gBAAZ,CAAnC;;AAGA,QAAO,OAAP,CAAe,YAAM;;AAEjB,cAFiB;AAGjB,4BAHiB;AAIjB,wCAJiB;AAKjB,wCALiB;AAMjB,4BAAW,SA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","file":"server.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/assets/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 943bec7d46ce9ea7e055\n **/","/**\n * Copyright (c) 2014, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * https://raw.github.com/facebook/regenerator/master/LICENSE file. An\n * additional grant of patent rights can be found in the PATENTS file in\n * the same directory.\n */\n\n!(function(global) {\n  \"use strict\";\n\n  var hasOwn = Object.prototype.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  var inModule = typeof module === \"object\";\n  var runtime = global.regeneratorRuntime;\n  if (runtime) {\n    if (inModule) {\n      // If regeneratorRuntime is defined globally and we're in a module,\n      // make the exports object identical to regeneratorRuntime.\n      module.exports = runtime;\n    }\n    // Don't bother evaluating the rest of this file if the runtime was\n    // already defined globally.\n    return;\n  }\n\n  // Define the runtime globally (as expected by generated code) as either\n  // module.exports (if we're in a module) or a new, empty object.\n  runtime = global.regeneratorRuntime = inModule ? module.exports : {};\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided, then outerFn.prototype instanceof Generator.\n    var generator = Object.create((outerFn || Generator).prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  runtime.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype;\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] = GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  runtime.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  runtime.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `value instanceof AwaitArgument` to determine if the yielded value is\n  // meant to be awaited. Some may consider the name of this method too\n  // cutesy, but they are curmudgeons.\n  runtime.awrap = function(arg) {\n    return new AwaitArgument(arg);\n  };\n\n  function AwaitArgument(arg) {\n    this.arg = arg;\n  }\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value instanceof AwaitArgument) {\n          return Promise.resolve(value.arg).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration. If the Promise is rejected, however, the\n          // result for this iteration will be rejected with the same\n          // reason. Note that rejections of yielded Promises are not\n          // thrown back into the generator function, as is the case\n          // when an awaited Promise is rejected. This difference in\n          // behavior between yield and await is important, because it\n          // allows the consumer to decide what to do with the yielded\n          // rejection (swallow it and continue, manually .throw it back\n          // into the generator, abandon iteration, whatever). With\n          // await, by contrast, there is no opportunity to examine the\n          // rejection reason outside the generator function, so the\n          // only option is to throw it from the await expression, and\n          // let the generator function handle the exception.\n          result.value = unwrapped;\n          resolve(result);\n        }, reject);\n      }\n    }\n\n    if (typeof process === \"object\" && process.domain) {\n      invoke = process.domain.bind(invoke);\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  runtime.async = function(innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList)\n    );\n\n    return runtime.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          if (method === \"return\" ||\n              (method === \"throw\" && delegate.iterator[method] === undefined)) {\n            // A return or throw (when the delegate iterator has no throw\n            // method) always terminates the yield* loop.\n            context.delegate = null;\n\n            // If the delegate iterator has a return method, give it a\n            // chance to clean up.\n            var returnMethod = delegate.iterator[\"return\"];\n            if (returnMethod) {\n              var record = tryCatch(returnMethod, delegate.iterator, arg);\n              if (record.type === \"throw\") {\n                // If the return method threw an exception, let that\n                // exception prevail over the original return or throw.\n                method = \"throw\";\n                arg = record.arg;\n                continue;\n              }\n            }\n\n            if (method === \"return\") {\n              // Continue with the outer return, now that the delegate\n              // iterator has been terminated.\n              continue;\n            }\n          }\n\n          var record = tryCatch(\n            delegate.iterator[method],\n            delegate.iterator,\n            arg\n          );\n\n          if (record.type === \"throw\") {\n            context.delegate = null;\n\n            // Like returning generator.throw(uncaught), but without the\n            // overhead of an extra function call.\n            method = \"throw\";\n            arg = record.arg;\n            continue;\n          }\n\n          // Delegate generator ran and handled its own exceptions so\n          // regardless of what the method was, we continue as if it is\n          // \"next\" with an undefined arg.\n          method = \"next\";\n          arg = undefined;\n\n          var info = record.arg;\n          if (info.done) {\n            context[delegate.resultName] = info.value;\n            context.next = delegate.nextLoc;\n          } else {\n            state = GenStateSuspendedYield;\n            return info;\n          }\n\n          context.delegate = null;\n        }\n\n        if (method === \"next\") {\n          if (state === GenStateSuspendedYield) {\n            context.sent = arg;\n          } else {\n            context.sent = undefined;\n          }\n\n        } else if (method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw arg;\n          }\n\n          if (context.dispatchException(arg)) {\n            // If the dispatched exception was caught by a catch block,\n            // then let that catch block handle the exception normally.\n            method = \"next\";\n            arg = undefined;\n          }\n\n        } else if (method === \"return\") {\n          context.abrupt(\"return\", arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          var info = {\n            value: record.arg,\n            done: context.done\n          };\n\n          if (record.arg === ContinueSentinel) {\n            if (context.delegate && method === \"next\") {\n              // Deliberately forget the last sent value so that we don't\n              // accidentally pass it on to the delegate.\n              arg = undefined;\n            }\n          } else {\n            return info;\n          }\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(arg) call above.\n          method = \"throw\";\n          arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  runtime.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  runtime.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      this.sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n        return !!caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.next = finallyEntry.finallyLoc;\n      } else {\n        this.complete(record);\n      }\n\n      return ContinueSentinel;\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = record.arg;\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      return ContinueSentinel;\n    }\n  };\n})(\n  // Among the various tricks for obtaining a reference to the global\n  // object, this seems to be the most reliable technique that does not\n  // use indirect eval (which violates Content Security Policy).\n  typeof global === \"object\" ? global :\n  typeof window === \"object\" ? window :\n  typeof self === \"object\" ? self : this\n);\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../~/regenerator/runtime.js\n ** module id = 1\n ** module chunks = 0\n **/","\nimport {BotService} from './services/BotService.jsx';\nimport {Server} from './server.jsx';\nimport {setup} from './services.jsx';\nimport {Facebook} from './facebook.jsx';\nimport {FriendRepository} from './repositories/FriendRepository.jsx';\nimport {publishCollections} from './publish.jsx';\nimport {setupMeteorMethods} from './methods.jsx';\n\nconsole.log(\"we start the server\", process.env.GAME_CREATOR_URL);\n\n\nMeteor.startup(() => {\n\n    debugger;\n    setup();\n    publishCollections();\n    setupMeteorMethods();\n    BotService.createBot();\n    BotService.observeGameCreation();\n    \n    if (process.env.TIMEOUT_BETWEEN_FETCHES == null) {\n        throw new Error(\"Missing environment variable: TIMEOUT_BETWEEN_FETCHES\");\n    }\n    \n    Meteor.setInterval(Server.fetchAllBoards.bind(Server), process.env.TIMEOUT_BETWEEN_FETCHES);\n});\n\nAccounts.onLogin(attempt => {\n    if (!attempt.allowed) {\n        return;\n    }\n\n    // if (attempt.type === 'resume') {}\n\n    const user = attempt.user;\n\n    Server.fetchData(user._id);\n\n    console.log(`Fetching friends for user ${user._id}...`);\n\n    const fbFriends = Facebook.getFriends(user);\n    FriendRepository.updateFriends(user._id, fbFriends);\n    FriendRepository.addBot(user._id, BotService.botAsFriend());\n});\n\n\n\n\n/** WEBPACK FOOTER **\n ** ../app/server/main.jsx\n **/","import {Games} from \"./../collections/Games.jsx\";\nimport {GameStatus} from \"./../../common/models/GameStatus.jsx\"\nimport {JoinRequests} from './../collections/JoinRequests.jsx';\nimport {JoinRequestService} from './../services/JoinRequestService.jsx';\nimport {Kind} from './../../common/models/Questions.jsx';\nimport {GameBoard} from './../../common/models/GameBoard.jsx';\nimport {GameBoardRepository} from './../repositories/GameBoardRepository.jsx';\nimport {GameRepository} from './../repositories/GameRepository.jsx';\nimport {AnswerVerificationService} from './verification/AnswerVerificationService.jsx';\nimport {BoardStateService} from './BoardStateService.jsx';\nimport {GamestatsService} from './GamestatsService.jsx';\nimport {findIndex} from './../../common/helpers/findIndex.jsx';\nimport {MultipleChoiceAnswer, MultipleChoiceData, MultipleChoiceVerificationService} from './verification/MultipleChoiceVerificationService.jsx';\nimport {TimelineAnswer, TimelineData, TimelineVerificationService} from './verification/TimelineVerificationService.jsx';\nimport {GeoAnswer, GeoData, GeoVerificationService} from './verification/GeoVerificationService.jsx';\nimport {OrderAnswer, OrderItem, OrderData} from './verification/ReorderVerificationService.jsx';\nimport {AnswerService} from './AnswerService.jsx';\nimport {Marker} from './../../common/models/questions/Marker.jsx';\n\n\nconst BOT_USERNAME = 'bot';\n\n\nexport const BotService = {\n    \n    bot() {\n      return BotService.getBot();\n    },\n\n    getBot() {\n        if (!BotService.botCreated()) {\n          this.createBot();\n        }\n\n        return Meteor.users.findOne({username: BOT_USERNAME});\n    },\n\n    isBot(userId) {\n      return BotService.getBot()._id == userId;\n    },\n\n    botAsFriend() {\n      const bot = this.getBot();\n      return {\n          id: bot._id,\n          name: bot.profile.name,\n          isBot: true\n      };\n    },\n\n    botCreated() {\n      return Meteor.users.find({username: BOT_USERNAME}).count() > 0;\n    },\n\n    createBot(force = false) {\n        if (force || !BotService.botCreated()) {\n            console.log(\"Creating bot...\");\n\n            Accounts.createUser({\n                username: BOT_USERNAME,\n                email: \"bot@reminisceme.com\",\n                password: \"123456\",\n                profile: {\n                    name: \"Anne Droid\"\n                }\n            });\n        }\n    },\n\n    observeGameCreation() {\n        const bot = BotService.bot();\n\n        const query = Games.find(\n            {$and:\n                [{$or:\n                    [{player1: bot._id}, {player2: bot._id}]},\n                    {status:\n                    {$in: [GameStatus.Playing, GameStatus.Creating, GameStatus.Waiting]}}]\n            });\n\n        const handle = query.observe({\n            added(game) {\n                console.log(`Starting to observe game ${game._id}`);\n\n                BotService.observeGame(game._id, bot._id);\n\n                const request = JoinRequests.findOne({gameId: game._id});\n                if (request) {\n                    JoinRequestService.accept(request._id);\n                    console.log(`Bot #1 accepted join request ${request._id}.`);\n                }\n            },\n\n            removed(game) {\n                console.log(`Game ${game._id} that bot #1 was playing has been removed.`);\n            }\n        });\n    },\n\n    observeGame(gameId, botId) {\n        const TIMEOUT = 3 * 1000;\n\n        const query   = Games.find(gameId);\n        const game    = Games.findOne(gameId);\n        const botTurn = game.player1 === botId ? 1 : 2;\n        const handle  = query.observe({\n          changed(newGame, oldGame) {\n            if (newGame.playerTurn === botTurn) {\n              setTimeout(Meteor.bindEnvironment(() => {\n                BotService.onGameChanged(newGame, handle);\n              }), TIMEOUT);\n            }\n          }\n        });\n    },\n\n    onGameChanged(game, handle) {\n      if (game.status === GameStatus.Ended || game.status === GameStatus.Waiting) {\n        return;\n      }\n\n      const result = BotService.playTurn(game);\n      console.log(\"Results for bot turn:\", result);\n\n      BotService.drawBoardState(Games.findOne(game._id));\n\n      if (result.win || result.draw) {\n        handle.stop();\n        console.log(`Game ended. Won: ${result.win}. Draw: ${result.draw}.`);\n      }\n    },\n\n    playTurn(game) {\n        if (game.getStatus() !== GameStatus.Playing) {\n          return;\n        }\n\n        const player    = game.getCurrentPlayer()\n        const gameBoard = game.getCurrentBoard();\n        const firstTurn = game.getCurrentPlayerAvailableMoves().length == 9;\n\n        const method      = (firstTurn) ? 'pickRandom' : 'pickTile';\n        const tile        = BotService[method](game, gameBoard);\n        const successrate = 66;\n\n        if (!tile) {\n          throw new Meteor.Error(500, \"Bot could't find a tile to play on.\");\n        }\n\n        const answers = _.map(tile.getQuestions(), q => {\n            switch (q.kind) {\n                case Kind.Timeline:\n                    return new TimelineAnswer(\n                        new TimelineData(_.random(0, 100) < successrate ? q.answer: q.default)\n                    );\n                    break;\n                case Kind.MultipleChoice:\n                    return new MultipleChoiceAnswer(\n                        new MultipleChoiceData(_.random(0, 100) < successrate ? q.answer: q.answer + 1 % 4)\n                    );\n                    break;\n                case Kind.Geolocation:\n                    const geoAnswer = new GeoAnswer(\n                        //new GeoData(new Marker(0, 0))\n                        new GeoData(_.random(0, 100) < successrate ? q.getAnswer(): new Marker(0, 0))\n                    );\n                    return geoAnswer;\n                    break;\n                case Kind.Order:\n                    const correctOrder = new OrderData(\n                        [new OrderItem(q.answer[0], \"\"),\n                            new OrderItem(q.answer[1], \"\"),\n                            new OrderItem(q.answer[2], \"\"),\n                            new OrderItem(q.answer[3], \"\")\n                        ]);\n                    const incorrectOrder = new OrderData(\n                        [new OrderItem(0, \"\"),\n                            new OrderItem(0, \"\"),\n                            new OrderItem(0, \"\"),\n                            new OrderItem(0, \"\")\n                        ]);\n                    return new OrderAnswer(0, _.random(0, 100) < successrate? correctOrder: incorrectOrder);\n                break;\n                default:\n                    throw new Meteor.Error(500, `Unknown Question Kind ${q.kind} for Bot`);\n            }\n        });\n\n        return AnswerService.post(player, game._id, tile._id, answers);\n    },\n\n    pickTile(game, gameBoard) {\n        const tiles = gameBoard.getTiles();\n        const result = BotService.minmax(game, game.getPlayerTurn(), 0);\n\n        if (result.move == null) {\n          return null;\n        }\n\n        return tiles[result.move.row * 3 + result.move.column];\n    },\n\n    pickRandom(game, gameBoard) {\n        const tiles = gameBoard.getTiles();\n\n        const indexTiles = _.zip(_.range(9), _.flatten(game.boardState));\n\n        const potentialTiles = _.filter(indexTiles, function (t) {\n            return t[1].player === 0\n        });\n        if (potentialTiles.length > 0) {\n            return tiles[_.sample(potentialTiles)[0]];\n        } else {\n            return _.sample(tiles);\n        }\n    },\n\n    minmax(game, player, depth) {\n        const score = BotService.score(game.boardState, player, depth);\n        if (score !== 0){\n            return {move: null, score: score};\n        }\n        depth += 1;\n        var scores = [];\n        var moves = [];\n\n        const possibilities = BotService.getAvailableMoves(game, game.getPlayerTurn());\n        if (_.isEmpty(possibilities)){\n            return {move: null, score: 0};\n        }\n        _.forEach(possibilities, m => {\n            const updatedGame = game.createCopy();\n            BotService.makeMove(updatedGame, m, game.getPlayerTurn());\n            scores.push(BotService.minmax(updatedGame, player, depth).score);\n            moves.push(m);\n        });\n\n        if (game.getPlayerTurn() === player){\n            const maxScoreIndex = _.indexOf(scores, _.max(scores));\n            const move = moves[maxScoreIndex];\n            return {move: move, score: scores[maxScoreIndex]}\n        } else {\n            const minScoreIndex = _.indexOf(scores, _.min(scores));\n            const move = moves[minScoreIndex];\n            return {move: move, score: scores[minScoreIndex]}\n        }\n    },\n\n    makeMove(game, move, player) {\n        game.setPlayer1AvailableMoves(_.filter(game.getPlayer1AvailableMoves(), m => {return m.row !== move.row || m.column !== move.column}));\n        game.setPlayer2AvailableMoves(_.filter(game.getPlayer2AvailableMoves(), m => {return m.row !== move.row || m.column !== move.column}));\n        game.boardState[move.row][move.column] = {player: player, score: 3};\n        game.setPlayerTurn((player  % 2) + 1);\n    },\n\n    score(boardState, currentPlayer, depth) {\n        const boardStateService = new BoardStateService(boardState, currentPlayer);\n\n        if (boardStateService.playerWins()) {\n            return 10 - depth;\n        }\n\n        if (boardStateService.playerWins((currentPlayer % 2) + 1)) {\n            return depth - 10;\n        }\n\n        return 0;\n    },\n\n    getAvailableMoves(game, currentPlayer) {\n        if (currentPlayer == 1){\n            return game.getPlayer1AvailableMoves();\n        } else {\n            return game.getPlayer2AvailableMoves();\n        }\n    },\n\n    drawBoardState(game) {\n        const bs = game.boardState;\n        for (var i = 0; i < bs.length; i++) {\n            const line = _.map(bs[i], function(s) {\n                if (s.player === 1){\n                    return s.score === 0? '-' : \"x\";\n                } else if (s.player === 2) {\n                    return s.score === 0? '-' : \"o\";\n                } else {\n                    return \" \"\n                }\n            });\n            console.log('|' + line.join('|') + '|');\n        }\n    }\n\n};\n\n\n\n\n/** WEBPACK FOOTER **\n ** ../app/server/services/BotService.jsx\n **/","import {assignProps} from './../../common/helpers/assignProps.jsx';\nimport {GameBoards} from './GameBoards.jsx';\nimport {GameBoard} from './../../common/models/GameBoard.jsx';\n\n\nexport let Games = new Mongo.Collection(\"games\", {\n    transform: function(doc){\n        return new Game(doc);\n    }\n});\n\nexport const GameProps = [\n  '_id', 'player1', 'player2', 'player1Board', 'player2Board',\n  'status', 'playerTurn', 'player1Scores', 'player2Scores', 'boardState',\n  'player1AvailableMoves', 'player2AvailableMoves',\n  'wonBy', 'creationTime'\n];\n\nexport class Game {\n\n    constructor(props) {\n        const diff = _.difference(Object.keys(props), GameProps);\n        if (!_.isEmpty(diff)){\n            throw new Meteor.Error(500, \"Game constructor with unusable parameters \" + diff);\n        }\n        assignProps(this, GameProps, props);\n    }\n\n    getId() {\n        return this._id;\n    }\n\n    getPlayer1() {\n        return this.player1;\n    }\n\n    getPlayer2() {\n        return this.player2;\n    }\n\n    getPlayer1Board() {\n        if (typeof this.player1Board === 'string') {\n          this.player1Board = GameBoards.findOne(this.player1Board);\n        }\n\n        const board = this.player1Board;\n\n        if (!(board instanceof GameBoard)) {\n          return GameBoard.fromRaw(board);\n        }\n\n        return board;\n    }\n\n    setPlayer1Board(value) {\n        this.player1Board = value;\n    }\n\n    getPlayer2Board() {\n        if (typeof this.player2Board === 'string') {\n          this.player2Board = GameBoards.findOne(this.player2Board);\n        }\n\n        const board = this.player2Board;\n\n        if (!(board instanceof GameBoard)) {\n          return GameBoard.fromRaw(board);\n        }\n\n        return board;\n    }\n\n    getCurrentBoard() {\n        return this[`getPlayer${this.getPlayerTurn()}Board`]();\n    }\n\n    setPlayer2Board(value) {\n        this.player2Board = value;\n    }\n\n    getBoardState() {\n        return this.boardState;\n    }\n\n    getStatus(){\n        return this.status;\n    }\n\n    setStatus(value){\n        this.status = value;\n    }\n\n    getPlayerTurn(){\n        return this.playerTurn;\n    }\n\n    setPlayerTurn(value){\n        if(value < 1 || value > 2){\n            throw new Meteor.Error(\"There can only be 2 players per game, turn value \" + value);\n        }\n        this.playerTurn = value;\n    }\n\n    nextTurn() {\n        this.setPlayerTurn(this.getPlayerTurn() === 1 ? 2 : 1);\n    }\n\n    getCurrentPlayer() {\n        if (this.playerTurn === 1) {\n            return this.player1;\n        }\n        return this.player2;\n    }\n\n    getPlayer1Scores(){\n        return this.player1Scores;\n    }\n\n    getPlayer2Scores() {\n        return this.player2Scores;\n    }\n\n    incrementCurrentPlayerScore(value) {\n        this['player' + this.getPlayerTurn() + 'Scores'] += value;\n    }\n\n    getOpponent() {\n        var myId = Meteor.userId();\n\n        if (this.player1 === myId) {\n            return this.player2;\n        }\n        return this.player1;\n    }\n\n    getOpponentForUser(userId) {\n        if (this.player1 === userId) {\n            return this.player2;\n        }\n        return this.player1;\n    }\n\n    getPlayer1AvailableMoves(){\n        return this.player1AvailableMoves;\n    }\n\n\n    setPlayer1AvailableMoves(value) {\n        this.player1AvailableMoves = value;\n    }\n\n    getPlayer2AvailableMoves(){\n        return this.player2AvailableMoves;\n    }\n\n    setPlayer2AvailableMoves(value) {\n        this.player2AvailableMoves = value;\n    }\n\n    getCurrentPlayerAvailableMoves() {\n        return this['player' + this.getPlayerTurn() + 'AvailableMoves'];\n    }\n\n    setCurrentPlayerAvailableMoves(value) {\n        this['player' + this.getPlayerTurn() + 'AvailableMoves'] = value;\n    }\n\n    removeCurrentPlayerAvailableMove(move) {\n        this.setCurrentPlayerAvailableMoves(\n        _.filter(this.getCurrentPlayerAvailableMoves(), m => {return m.row !== move.row || m.column !== move.column})\n        );\n    }\n\n    getWonBy() {\n        return this.wonBy;\n    }\n\n    setWonBy(value) {\n        this.wonBy = value;\n    }\n\n    getCreationTime() {\n        return this.creationTime;\n    }\n\n    setCreationTime(time) {\n        this.creationTime = time;\n    }\n\n    createCopy() {\n        var newBoardState = GameBoardClone(this.getBoardState());\n        //for (var i = 0; i < this.getBoardState().length; i++){\n        //    newBoardState.push([]);\n        //    for (var j = 0; j < this.getBoardState()[i].length; j++){\n        //        newBoardState[i][j] = this.getBoardState()[i][j].slice(0);\n        //    }\n        //}\n        return new Game({\n            _id: this.getId(),\n            player1: this.getPlayer1(),\n            player2: this.getPlayer2(),\n            player1Board: this.getPlayer1Board(),\n            player2Board: this.getPlayer2Board(),\n            status: this.getStatus(),\n            playerTurn: this.getPlayerTurn(),\n            player1Scores: this.getPlayer1Scores(),\n            player2Scores: this.getPlayer2Scores(),\n            boardState: newBoardState,\n            player1AvailableMoves: this.getPlayer1AvailableMoves(),\n            player2AvailableMoves: this.getPlayer2AvailableMoves(),\n            creationTime: this.getCreationTime()\n        });\n    }\n\n};\n\nGame.fromRaw = (game) => {\n    return new Game(game);\n};\n\nconst GameBoardClone = (existingArray) => {\n    var newObj = (existingArray instanceof Array) ? [] : {};\n    for (var i in existingArray) {\n        if (i == 'clone') continue;\n        if (existingArray[i] && typeof existingArray[i] == \"object\") {\n            newObj[i] = GameBoardClone(existingArray[i]);\n        } else {\n            newObj[i] = existingArray[i]\n        }\n    }\n    return newObj;\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ../app/server/collections/Games.jsx\n **/","import {capitalize} from './capitalize.jsx';\n\n\nexport const assignProps = (obj, propNames, props) => {\n    if (props == null || typeof props !== 'object') {\n        return;\n    }\n\n    for (let propName of propNames) {\n      if (!props.hasOwnProperty(propName)) {\n            continue;\n        }\n\n        const methodName = `set${capitalize(propName)}`;\n        if (typeof obj[methodName] === 'function') {\n            obj[methodName](props[propName]);\n        } else {\n            obj[propName] = props[propName];\n        }\n    }\n};\n\n\n\n\n/** WEBPACK FOOTER **\n ** ../app/common/helpers/assignProps.jsx\n **/","\nexport const capitalize = (str) =>\n    str.charAt(0).toUpperCase() + str.substring(1);\n\n\n\n\n/** WEBPACK FOOTER **\n ** ../app/common/helpers/capitalize.jsx\n **/","import {GameBoard} from './../../common/models/GameBoard.jsx';\n\nexport const GameBoards = new Mongo.Collection('gameBoards', {\n    transform(doc) {\n        return GameBoard.fromRaw(doc);\n    }\n});\n\n\n\n\n/** WEBPACK FOOTER **\n ** ../app/server/collections/GameBoards.jsx\n **/","import {Tile} from './Tile.jsx';\nimport {assignProps} from './../../common/helpers/assignProps.jsx';\n\nvar cache = {};\n\nconst lazy = (key, obj, prop, compute) => {\n  if (cache[key] === undefined) {\n    cache[key] = compute(obj[prop]);\n  }\n  return cache[key];\n};\n\nexport const GameBoardProps = ['_id', 'userId', 'tiles'];\n\nexport class GameBoard {\n\n  constructor(props) {\n    assignProps(this, GameBoardProps, props);\n  }\n\n  getId() {\n    return this._id;\n  }\n\n  getUserId() {\n    return this.userId;\n  }\n\n  getTiles() {\n    return this.tiles;\n  }\n\n  getTileById(tileId) {\n    return _.find(this.getTiles(), tile => tile._id === tileId);\n  }\n\n  static fromRaw(userId, data) {\n    if (typeof userId === 'object') {\n      data = userId;\n      userId = data.userId;\n    }\n\n    const tiles = _.map(data.tiles, Tile.fromRaw.bind(Tile));\n\n    return new GameBoard({userId, tiles});\n  };\n\n\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ../app/common/models/GameBoard.jsx\n **/","import {Question} from './Questions.jsx';\nimport {generateId} from './../../common/helpers/generateId.jsx';\nimport {assignProps} from './../../common/helpers/assignProps.jsx';\n\nconst TileProps = ['_id', 'type', 'question1', 'question2', 'question3', 'score', 'answered', 'disabled'];\n\nexport class Tile {\n\n    constructor(props) {\n        assignProps(this, TileProps, props);\n    }\n\n    getId() {\n        return this._id;\n    }\n\n    getType() {\n        return this.type;\n    }\n\n    getScore() {\n        return this.score || {\n            me: 0,\n            them: 0\n        };\n    }\n\n    getQuestion1() {\n        return this.question1;\n    }\n\n    getQuestion2() {\n        return this.question2;\n    }\n\n    getQuestion3() {\n        return this.question3;\n    }\n\n    /**\n     * return the array of questions for the tile\n     * @return {[Question]}\n     */\n    getQuestions() {\n        return [this.question1, this.question2, this.question3];\n    }\n\n    setDisabled(value) {\n        this.disabled = value;\n    }\n\n    getIsDisabled() {\n        return this.disabled;\n    }\n\n    isDisabled() {\n        return this.disabled;\n    }\n\n    getIsAnswered() {\n        return this.answered;\n    }\n\n    isAnswered() {\n        return this.answered;\n    }\n\n    setAnswered(value) {\n        this.answered = value;\n    }\n\n    static fromRaw(tile) {\n        const question1 = Question.fromRaw(tile, tile.question1);\n        const question2 = Question.fromRaw(tile, tile.question2);\n        const question3 = Question.fromRaw(tile, tile.question3);\n        return new Tile({\n            _id: tile._id || generateId(),\n            type: tile.type,\n            question1: question1,\n            question2: question2,\n            question3: question3,\n            score: 0,\n            answered: !!tile.answered,\n            disabled: !!tile.disabled\n        });\n    }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ../app/common/models/Tile.jsx\n **/","import {assignProps} from './../../common/helpers/assignProps.jsx';\nimport {OrderQuestion} from './questions/OrderQuestion.jsx';\nimport {Marker} from './questions/Marker.jsx'\n\n\nconst Subject = {\n  fromRaw(doc) {\n    return doc;\n  }\n};\n\nconst ChoiceProps = ['text', 'imageUrl', 'fbId', 'pageId'];\n\nexport class Choice {\n\n  constructor(props) {\n    assignProps(this, ChoiceProps, props);\n  }\n\n  getText() {\n    return this.text;\n  }\n\n  getImageUrl() {\n    return this.imageUrl;\n  }\n\n  getFbId() {\n    return this.fbId;\n  }\n\n  getPageId() {\n    return this.pageId;\n  }\n\n  static fromRaw(data) {\n    return new Choice({\n      text: data.text || data.name,\n      fbId: data.fbId || data.fb_id,\n      pageId: data.pageId || data.page_id,\n      imageUrl: data.imageUrl || data.image_url\n    });\n  };\n}\n\n\nconst MultipleChoiceQuestionProps = ['_id', 'subject', 'choices', 'answer', 'type', 'kind'];\n\nexport class MultipleChoiceQuestion {\n\n  constructor(props) {\n    assignProps(this, MultipleChoiceQuestionProps, props);\n  }\n\n  getId() {\n    return this._id;\n  }\n\n  getSubject() {\n    return this.subject;\n  }\n\n  getType() {\n    return this.type;\n  }\n\n  getKind() {\n    return this.kind;\n  }\n\n  getChoices() {\n    return this.choices;\n  }\n\n  getAnswer() {\n    if (!Meteor.isServer) {\n      throw new Error(`Well tried, there\\'s nothing to see here. See for yourself: ${this.answer}`);\n    }\n\n    return this.answer;\n  }\n\n  static fromRaw(data) {\n    data.choices = _.map(data.choices, c =>\n        Choice.fromRaw(c));\n    data.subject = Subject.fromRaw(data.subject);\n    return new MultipleChoiceQuestion(data);\n  }\n}\n\n\nexport const TimelineUnit = {\n  Day: 'Day',\n  Week: 'Week',\n  Month: 'Month',\n  Year: 'Year'\n};\n\nconst TimelineQuestionProps = ['_id', 'subject', 'min', 'max', 'default', 'unit',\n  'step', 'threshold', 'answer', 'type', 'kind'];\n\nexport class TimelineQuestion {\n\n  constructor(props) {\n    assignProps(this, TimelineQuestionProps, props);\n  }\n\n  getId() {\n    return this._id;\n  }\n\n  getType() {\n    return this.type;\n  }\n\n  getKind() {\n    return this.kind;\n  }\n\n  getSubject() {\n    return this.subject;\n  }\n\n  getMin() {\n    return this.min;\n  }\n\n  getMax() {\n    return this.max;\n  }\n\n  getStep() {\n    return this.step;\n  }\n\n  getUnit() {\n    return this.unit;\n  }\n\n  getThreshold() {\n    return this.threshold;\n  }\n\n  getDefault() {\n    return this.default;\n  }\n\n  getAnswer() {\n    if (!Meteor.isServer) {\n      throw new Error(`Well tried, there\\'s nothing to see here. See for yourself: ${this.answer}`);\n    }\n\n    return this.answer;\n  }\n\n  static fromRaw(data) {\n    data.subject = Subject.fromRaw(data.subject);\n    return new TimelineQuestion(data);\n  };\n}\n;\n\n\nconst GeoQuestionProps = ['_id', 'subject', 'range', 'defaultLocation', 'answer', 'type', 'kind'];\n\nexport class GeoQuestion {\n  constructor(props) {\n    assignProps(this, GeoQuestionProps, props);\n  }\n\n  getId() {\n    return this._id;\n  }\n\n  /**\n   *\n   * @returns {Subject}\n   */\n\n  getSubject() {\n    return this.subject;\n  }\n\n  getType() {\n    return this.type;\n  }\n\n  /**\n   * The allowed distance which is still considered correct\n   * @returns {number}\n   */\n  getRange() {\n    return this.range;\n  }\n\n  /**\n   *\n   * @returns {Marker}\n   */\n  getDefaultLocation() {\n    return this.defaultLocation;\n  }\n\n\n  getKind() {\n    return this.kind;\n  }\n\n  //TODO: Improve the creation through props to properly show types, create a constructor\n  /**\n   * @return {Marker}\n   */\n  getAnswer() {\n    if (!Meteor.isServer) {\n      throw new Error(`Well tried, there\\'s nothing to see here. See for yourself: ${this.answer}`);\n    }\n    return new Marker(this.answer.latitude, this.answer.longitude);\n  }\n\n  static fromRaw(raw) {\n    return new GeoQuestion(raw);\n  }\n}\n;\n\n\nexport class Question {\n  static getQuestionFromType(kind) {\n    switch (kind) {\n      case Kind.MultipleChoice:\n        return MultipleChoiceQuestion;\n      case Kind.Timeline:\n        return TimelineQuestion;\n      case Kind.Order:\n        return OrderQuestion;\n      case Kind.Geolocation:\n        return GeoQuestion;\n      default:\n        Meteor.Error(404, `Unknown question kind: ${kind}`);\n    }\n\n  }\n\n\n  \n  static fromRaw(tile, data) {\n    const kind = data.kind;\n    if (kind == null) {\n      throw new Meteor.Error(500, `Unknown question kind: ${data.kind}`);\n    }\n\n    const Constructor = Question.getQuestionFromType(kind);\n    if (Constructor == null) {\n      throw new Meteor.Error(500, `Cannot find constructor for question of kind ${kind}`);\n    }\n\n    return Constructor.fromRaw(data);\n  };\n\n\n}\n;\n\nexport const Kind = {\n  MultipleChoice: 'MultipleChoice',\n  Timeline: 'Timeline',\n  Geolocation: 'Geolocation',\n  Order: 'Order'\n};\n\n\n\n\n\n/** WEBPACK FOOTER **\n ** ../app/common/models/Questions.jsx\n **/","import {assignProps} from './../../../common/helpers/assignProps.jsx';\n\n\nconst OrderQuestionProps = ['_id', 'subject', 'choices', 'answer', 'type', 'kind', 'items'];\n\n\nexport class SubjectWithId {\n    /**\n     *\n     * @param {QuestionSubject} subject\n     * @param {string} uId\n     */\n    constructor(subject, uId) {\n        this._subject = subject;\n        this._uId = uId;\n    }\n\n    /**\n     *\n     * @returns {QuestionSubject}\n     */\n\n    get subject() {\n        return this._subject;\n    }\n\n    /**\n     *\n     * @returns {string}\n     */\n    get uId() {\n        return this._uId;\n    }\n};\n\nlet SubjectTypes = {\n    TextPost: 'TextPost',\n    ImagePost: 'ImagePost',\n    VideoPost: 'VideoPost',\n    LinkPost: 'LinkPost',\n    Comment: 'Comment',\n    Page: 'Page'\n\n};\n\nexport class OrderQuestion {\n\n\n    constructor(props) {\n        const diff = _.difference(_.without(Object.keys(props), 'userId'), OrderQuestionProps);\n        if (!_.isEmpty(diff)) {\n            throw new Meteor.Error(500, \"OrderQuestion constructor with unusable parameters \" + diff);\n        }\n        assignProps(this, OrderQuestionProps, props);\n    }\n\n    /**\n     * retunrs the Question id\n     * @returns {string}\n     */\n    getId() {\n        return this._id;\n    }\n\n    /**\n     *\n     * @returns {Subject}\n     */\n\n    getSubject() {\n        return this.subject;\n    }\n\n    getType() {\n        return this.type;\n    }\n\n    getItems() {\n        return this.items;\n    }\n\n    /**\n     * returns an array of SubjectWithIds\n     * @returns {[SubjectWithId]}\n     */\n    getChoices() {\n        return this.choices;\n    }\n\n    setChoices(value) {\n        this.choices = value;\n        this.items = _.map(value, c => {\n            switch (c.subject.type) {\n                case SubjectTypes.Page:\n                    return {id: c.uId, text: c.subject.name, subject:c.subject};\n                    break;\n                case SubjectTypes.TextPost:\n                    return {id: c.uId, text: c.subject.text, subject:c.subject};\n                    break;\n                case SubjectTypes.ImagePost:\n                    return {id: c.uId, text: c.subject.text, subject:c.subject};\n                    break;\n                case SubjectTypes.VideoPost:\n                    return {id: c.uId, text: c.subject.text, subject:c.subject};\n                    break;\n                case SubjectTypes.LinkPost:\n                    return {id: c.uId, text: c.subject.text, subject:c.subject};\n                    break;\n                case SubjectTypes.Comment:\n                    return {id: c.uId, text: c.subject.comment, subject:c.subject};\n                    break;\n                default:\n                    console.error(\"Ordering subject type not defined: \" + c.type);\n                    Meteor.Error(500, \"Ordering subject type not defined: \" + c.type);\n            }\n        });\n    }\n\n\n    getKind() {\n        return this.kind;\n    }\n\n    /**\n     * returns the correct id of the answers\n     * @returns {[number]}\n     */\n    getAnswer() {\n        if (!Meteor.isServer) {\n            throw new Error(`Well tried, there\\'s nothing to see here. See for yourself: ${this.answer}`);\n        }\n\n        return this.answer;\n    }\n\n    static fromRaw(raw) {\n        return new OrderQuestion(raw);\n    }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ../app/common/models/questions/OrderQuestion.jsx\n **/","export class Marker {\n\n  /**\n   *\n   * @param {number} latitude\n   * @param {number} longitude\n   */\n  constructor (latitude, longitude) {\n    this.latitude = latitude;\n    this.longitude = longitude;\n  }\n\n  /**\n   * Returns the latitude\n   * @return {number}\n   */\n  getLatitude() {\n    return this.latitude;\n  }\n\n  /**\n   * Returns the longitude\n   * @return {number}\n   */\n  getLongitude() {\n    return this.longitude;\n  }\n};\n\n\n/** WEBPACK FOOTER **\n ** ../app/common/models/questions/Marker.jsx\n **/","\nexport function generateId() {\n    return new Mongo.Collection.ObjectID()._str;\n};\n\n\n\n\n/** WEBPACK FOOTER **\n ** ../app/common/helpers/generateId.jsx\n **/","\nexport const GameStatus = Object.freeze({\n    Playing  : 'playing',\n    Waiting  : 'waiting',\n    Creating : 'creating',\n    Failed   : 'failed',\n    Declined : 'declined',\n    Ended    : 'ended',\n\n    // Backward-compatibility\n    Finished : 'finished'\n});\n\n\n\n\n/** WEBPACK FOOTER **\n ** ../app/common/models/GameStatus.jsx\n **/","\nimport {assignProps} from './../../common/helpers/assignProps.jsx';\n\nexport const JoinRequests = new Mongo.Collection(\"joinRequests\", {\n    transform: function(doc){\n        return new JoinRequest(doc);\n    }\n});\n\nexport const JoinRequestProps = ['_id', 'from', 'to', 'gameId'];\n\nexport class JoinRequest {\n\n    constructor(props) {\n        assignProps(this, JoinRequestProps, props);\n    }\n\n    getId() {\n        return this._id;\n    }\n\n    getFrom() {\n        return this.from;\n    }\n\n    getTo() {\n        return this.to;\n    }\n\n    getGameId() {\n        return this.gameId;\n        return this.gameId;\n    }\n\n    static fromRaw(request) {\n      return new JoinRequest(request);\n    }\n\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ../app/server/collections/JoinRequests.jsx\n **/","import {Server} from './../server.jsx';\nimport {Games} from './../collections/Games.jsx';\nimport {JoinRequests, JoinRequest} from './../collections/JoinRequests.jsx';\nimport {Friends} from './../../common/collections/Friends.jsx';\nimport {BotService} from './BotService.jsx';\nimport {GameService} from './GameService.jsx';\nimport {GameRepository} from './../repositories/GameRepository.jsx';\nimport {JoinRequestRepository} from './../repositories/JoinRequestRepository.jsx';\n\nexport const JoinRequestService = {\n\n    accept(requestId) {\n        var request = JoinRequests.findOne(requestId);\n        if (!request){\n            throw Meteor.Error(\"404\", \"Request does not exist with id\" + requestId);\n        }\n\n        const game = Games.findOne(request.gameId);\n\n        try {\n            Server.fetchGameBoard(request.from, game.getId(), 1);\n            Server.fetchGameBoard(request.to,   game.getId(), 2);\n        } catch (e) {}\n\n        JoinRequests.remove(requestId);\n        return Games.findOne(game.getId());\n    },\n\n    decline(requestId) {\n        const request = JoinRequests.findOne(requestId);\n\n        if (request == null) {\n          const msg = `No request with id ${requestId} found.`;\n          console.error(msg);\n          return {\n            status: 'error',\n            msg: msg\n          };\n        }\n\n        JoinRequests.remove(requestId);\n        var game = Games.findOne(request.gameId);\n        game.setStatus(GameStatus.Declined);\n        GameRepository.save(game);\n        return {status: \"success\"};\n    },\n\n    getOpponent(currentUserId, friendId) {\n        const friend = Friends.findOne(friendId);\n\n        if (friend == null) {\n            const msg = `Couldn't find a friend with id ${friendId}.`;\n            throw new Meteor.Error('JoinRequestService.noFriendWithId', msg);\n        }\n\n        if (friend.isBot) {\n            return BotService.getBot();\n        }\n\n        if (friend.facebookId == null) {\n          const msg = `Friend with id ${friendId} has no associated Facebook id.`;\n          throw new Meteor.Error('JoinRequestService.noAssociatedFacebook', msg);\n        }\n\n        console.log(`Checking if user ${currentUserId} is friend with ${friend.userId}`);\n\n        if (friend.userId == null) {\n          const friendUser = UserRepository.byFacebookId(friend.facebookId);\n\n          if (friendUser == null) {\n            const msg = `Friend ${friendId} has no associated user.`;\n            throw new Meteor.Error('JoinRequestService.noAssociatedUser', msg);\n          }\n\n          friend.userId = friendUser._id;\n          FriendRepository.save(friend);\n        }\n\n        const currentUser = Meteor.users.findOne(currentUserId);\n        const asFriend    = {\n          id: currentUser.services.facebook.id,\n          name: currentUser.services.facebook.name,\n          isBot: false\n        };\n\n        FriendRepository.updateFriends(friend.userId, [asFriend]);\n\n        return Meteor.users.findOne(friend.userId);\n    },\n\n    send(currentUserId, friendId) {\n      try {\n        const opponent  = JoinRequestService.getOpponent(currentUserId, friendId);\n        const game      = GameService.createGame(currentUserId, opponent._id);\n        const gameId    = GameRepository.save(game);\n        const join      = JoinRequest.fromRaw({ from: currentUserId, to: opponent._id, gameId: gameId });\n        const requestId = JoinRequestRepository.save(join);\n        console.log(`Created join request ${requestId} from ${currentUserId} to ${opponent._id} for game ${gameId}`);\n\n        return {\n          status: 'success',\n          requestId: requestId\n        };\n      }\n      catch (e) {\n        console.error(`JoinRequestService - Error: ${e}`);\n        return {\n          status: 'error',\n          msg: e.reason\n        };\n      }\n    }\n\n};\n\n\n\n\n/** WEBPACK FOOTER **\n ** ../app/server/services/JoinRequestService.jsx\n **/","import {GameFetches} from \"./collections/GameFetches.jsx\";\nimport {GameCreatorService} from \"./services/GameCreatorService.jsx\";\nimport {GameRepository} from './repositories/GameRepository.jsx';\nimport {GameFetchRepository} from './repositories/GameFetchRepository.jsx';\nimport {BotService} from './services/BotService.jsx';\nimport {Games} from './collections/Games.jsx';\nimport {GameBoard} from './../common/models/GameBoard.jsx';\nimport {GameBoardRepository} from './repositories/GameBoardRepository.jsx';\nimport {GameStatus} from './../common/models/GameStatus.jsx';\n\n\nexport const Server = {\n\n  fetchGameBoard(userId, gameId, playerNum, createFetch = true) {\n    console.log(`Fetching game board for user ${userId}...`);\n\n    const game = Games.findOne(gameId);\n    const bot = BotService.bot();\n\n    let gameBoard;\n\n    try {\n      if (BotService.isBot(userId)) {\n        console.log(`User ${userId} is a bot. Creating bot board...`);\n        const botBoard = JSON.parse(Assets.getText('json/gameboards/gameboard1.json'));\n        gameBoard = GameBoard.fromRaw(userId, botBoard);\n      }\n      else {\n        const user        = Meteor.users.findOne(userId);\n        const fbUserId    = user.services.facebook.id;\n        const accessToken = user.services.facebook.accessToken;\n        const result = GameCreatorService.fetchGameboard(fbUserId, accessToken);\n\n        gameBoard = GameBoard.fromRaw(userId, result.data);\n\n        console.log(`Fetched game board for user ${userId}`);\n      }\n\n      console.log(`Saving board for player ${playerNum}`);\n      GameBoardRepository.save(gameBoard);\n      game[`setPlayer${playerNum}Board`](gameBoard);\n\n      const status = (game.player1Board && game.player2Board) ? GameStatus.Playing : GameStatus.Creating;\n      console.log(status);\n      game.setStatus(status);\n\n      GameRepository.save(game);\n\n      return gameBoard;\n    }\n    catch (e) {\n      console.error(`ERROR: Can't create game board from game creator result: ${e}`);\n\n      if (createFetch) {\n        const fetch = new GameFetch({\n          gameId: game.getId(),\n          player: playerNum,\n          playerId: game[`getPlayer${playerNum}`](),\n          tries: 1\n        });\n\n        GameFetchRepository.save(fetch);\n      }\n    }\n  },\n\n  fetchData(userId) {\n    console.log(`Fetching data for user ${userId}...`);\n\n    const user        = Meteor.users.findOne(userId);\n    const fbUserId    = user.services.facebook.id;\n    const accessToken = user.services.facebook.accessToken;\n    \n    try {\n      console.log(\"we try to fetch data from gamecreator\");\n      GameCreatorService.fetchData(fbUserId, accessToken);\n    }\n    catch (e) {\n      console.log(`INFO: Non 200 reply from Game creator to 'fetchData' request ${e}`);\n    }\n  },\n\n  fetchAllBoards() {\n    const fetches = GameFetches.find().fetch();\n\n    fetches.forEach(fetch => {\n      Meteor.setTimeout(() => {\n        this.processFetch(fetch);\n      } , 0);\n    });\n  },\n\n  processFetch(fetch) {\n    console.log(`Processing fetch ${fetch.getId()}...`);\n    console.log(` - Game: ${fetch.getGameId()}`);\n    console.log(` - Player Id: ${fetch.getPlayerId()}`);\n    console.log(` - Player Num: ${fetch.getPlayer()}`);\n    console.log(` - Tries: ${fetch.getTries()}`);\n\n    try {\n      const board = this.fetchGameBoard(fetch.getPlayerId(), fetch.getGameId(), fetch.getPlayer(), false);\n\n      if (board == null) {\n        throw new Exception(\"Fetch failed\");\n      }\n\n      GameFetches.remove(fetch.getId());\n    }\n    catch(e) {\n      this.fetchFailed(fetch);\n    }\n  },\n\n  fetchFailed(fetch) {\n    fetch.incrementTries();\n\n    if (fetch.getTries() >= 10) {\n      const failedGame = Games.findOne(fetch.getGameId());\n      failedGame.setStatus(GameStatus.Failed);\n      GameRepository.save(failedGame);\n\n      GameFetches.remove(fetch.getId());\n\n      console.log(`Server: Maximum number of tries for game ${failedGame.getId()} reached`);\n    }\n    else {\n      GameFetchRepository.save(fetch);\n    }\n  }\n\n};\n\n\n\n\n\n/** WEBPACK FOOTER **\n ** ../app/server/server.jsx\n **/","export const GameFetches = new Mongo.Collection('gameFetches', {\n    transform(doc) {\n        return new GameFetch(doc);\n    }\n});\n\nlet GameFetchProps = ['_id', 'gameId', 'playerId', 'player', 'tries'];\n\nexport class GameFetch {\n\n    constructor(props) {\n        assignProps(this, GameFetchProps, props);\n    }\n\n    getId() {\n        return this._id;\n    }\n\n    getGameId() {\n        return this.gameId;\n    }\n\n    getPlayerId() {\n        return this.playerId;\n    }\n\n    getPlayer() {\n        return this.player;\n    }\n\n    getTries() {\n        return this.tries;\n    }\n\n    incrementTries() {\n        this.tries += 1;\n    }\n\n};\n\n\n\n\n\n/** WEBPACK FOOTER **\n ** ../app/server/collections/GameFetches.jsx\n **/","import {Querystring} from './../../common/helpers/querystring.jsx';\nimport {HTTPHelper} from './../helpers/http.jsx';\n\nexport class GameCreator {\n\n  constructor(baseUrl) {\n    if (baseUrl == null || baseUrl == '') {\n      throw new Error('GameCreatorService: missing baseUrl argument.');\n    }\n\n    this._baseUrl = baseUrl;\n  }\n\n  url(method, params) {\n    let query;\n    \n    if (params != null) {\n      query = '?' + Querystring.encode(params);\n    }\n    else {\n      query = '';\n    }\n\n    const url = `${this._baseUrl}/${method}${query}`;\n    return url;\n  }\n\n  fetchData(fbUserId, accessToken, callback) {\n    const params = {\n      user_id: fbUserId,\n      access_token: accessToken\n    };\n\n    const url = this.url('fetchData', params);\n\n    return HTTPHelper.get(url, callback);\n  }\n\n  fetchGameboard(fbUserId, accessToken, callback) {\n    const params = {\n      user_id: fbUserId,\n      access_token: accessToken\n    };\n    \n    const url = this.url('gameboard', params);\n\n    return HTTPHelper.get(url, callback);\n  }\n\n  fetchBuildInfo(callback) {\n    const url = this.url('info');\n\n    return HTTPHelper.get(url, callback);\n  }\n\n};\n\nmodule.exports = {\n  GameCreatorService: new GameCreator(process.env.GAME_CREATOR_URL)\n};\n\n\n\n\n/** WEBPACK FOOTER **\n ** ../app/server/services/GameCreatorService.jsx\n **/","\nexport const Querystring = {\n\n  stringify(value) {\n    if (typeof value === 'boolean') {\n      return value ? 'true' : 'false';\n    }\n    return value + '';\n  },\n\n  encode(props) {\n    return Object.keys(props).map(key =>\n      `${key}=${encodeURIComponent(this.stringify(props[key]))}`\n    ).join('&');\n  }\n\n};\n\n\n\n\n/** WEBPACK FOOTER **\n ** ../app/common/helpers/querystring.jsx\n **/","\nconst getSync  = Meteor.wrapAsync(Meteor.http.get);\nconst getAsync = Meteor.http.get;\n\nconst delSync  = Meteor.wrapAsync(Meteor.http.del);\nconst delAsync = Meteor.http.del;\n\nexport const HTTPHelper = {\n\n  getSync: getSync,\n  getAsync: getAsync,\n\n  delSync: delSync,\n  delAsync: delAsync,\n\n  get(url, callback) {\n    if (typeof callback !== 'function') {\n      return HTTPHelper.getSync(url);\n    }\n\n    return HTTPHelper.getAsync(url, callback);\n  },\n\n  del(url, callback) {\n    if (typeof callback !== 'function') {\n      return HTTPHelper.delSync(url);\n    }\n\n    return HTTPHelper.delAsync(url, callback);\n  }\n\n};\n\n\n\n\n/** WEBPACK FOOTER **\n ** ../app/server/helpers/http.jsx\n **/","\nimport {Games, GameProps} from './../collections/Games.jsx';\n\n\nexport const GameRepository = {\n\n\n  save(game) {\n    const doc = _.pick(game, ...GameProps);\n    if (game._id) {\n      Games.update(game._id, doc);\n    } else {\n      game._id = Games.insert(doc);\n    }\n\n    return game._id;\n  }\n\n};\n\n\n\n\n/** WEBPACK FOOTER **\n ** ../app/server/repositories/GameRepository.jsx\n **/","import {GameFetches} from './../collections/GameFetches.jsx';\n\nexport const GameFetchRepository = {\n\n    save(gameFetch) {\n\n        var doc = _.pick(gameFetch, 'gameId', 'playerId', 'player', 'tries');\n        if (gameFetch._id) {\n            GameFetches.update(gameFetch._id, {$set: doc});\n        } else {\n            gameFetch._id = GameFetches.insert(gameFetch);\n        }\n        return gameFetch._id;\n    }\n};\n\n\n\n\n/** WEBPACK FOOTER **\n ** ../app/server/repositories/GameFetchRepository.jsx\n **/","import {GameBoardProps} from './../../common/models/GameBoard.jsx';\nimport {GameBoards} from './../collections/GameBoards.jsx';\n\nexport const GameBoardRepository = {\n\n  save(gameBoard) {\n    const doc = _.pick(gameBoard, GameBoardProps);\n\n    if (gameBoard._id) {\n      GameBoards.update(doc._id, doc);\n    } else {\n      gameBoard._id = GameBoards.insert(doc);\n    }\n\n    return gameBoard._id;\n  }\n};\n\n\n\n\n/** WEBPACK FOOTER **\n ** ../app/server/repositories/GameBoardRepository.jsx\n **/","\nimport {Friend} from './../models/Friend.jsx';\n\nexport const Friends = new Mongo.Collection('friends', {\n    transform(doc) {\n        return Friend.fromRaw(doc);\n    }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ../app/common/collections/Friends.jsx\n **/","import {assignProps} from './../helpers/assignProps.jsx';\nimport {Routes} from './../../client/scripts/Routes.jsx';\n\nexport const FriendProps = ['_id', 'userId', 'facebookId', 'name', 'friendOf', 'isBot'];\n\nexport class Friend {\n\n    constructor(props) {\n        assignProps(this, FriendProps, props);\n    }\n\n    getId() {\n        return this._id;\n    }\n  \n    getUserId() {\n        return this.userId;\n    }\n  \n    hasUserId() {\n      return this.getUserId() != null;\n    }\n  \n    getFacebookId() {\n        return this.facebookId;\n    }\n  \n    getName() {\n        return this.name;\n    }\n  \n    getFriendOf() {\n        return this.friendOf;\n    }\n  \n    isABot() {\n        return !!this.isBot;\n    }\n  \n    getAvatarUrl() {\n        if (this.isABot()) {\n            return Routes.Assets.avatars.bot();\n        }\n  \n        if (this.getFacebookId() != null) {\n          return Routes.Assets.avatars.facebook(this.getFacebookId());\n        }\n  \n        return Routes.Assets.avatars.default();\n    }\n  \n  static fromRaw(data) {\n    return new Friend(data);\n  }\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ../app/common/models/Friend.jsx\n **/","import {Querystring} from './../../common/helpers/querystring.jsx';\n\n// FIXME: Get rid of URL object.\nfunction url(path) {\n  return {\n    url: path,\n    toString() {\n      return this.url;\n    }\n  };\n}\n\nexport const Routes = {\n  Assets: {\n    at(path) {\n      return url('/' + (path + '').trim('/'));\n    },\n    avatars: {\n      default() {\n        return url('images/avatar-default.png');\n      },\n      bot() {\n        return url('images/bot-avatar.png');\n      },\n      facebook(facebookId, query = '') {\n        var qstr = query ? '?' + Querystring.encode(query) : '';\n        return url(`https://graph.facebook.com/${facebookId}/picture${qstr}`);\n      }\n    }\n  },\n  Facebook: {\n    avatar(facebookId, query) {\n      return Routes.Assets.avatars.facebook(facebookId, query);\n    }\n  }\n};\n\n\n\n\n/** WEBPACK FOOTER **\n ** ../app/client/scripts/Routes.jsx\n **/","import {Games, Game} from './../collections/Games.jsx';\nimport {GameRepository} from './../repositories/GameRepository.jsx';\nimport {GameStatus} from  './../../common/models/GameStatus.jsx';\n\nexport const GameService = {\n    start(gameId) {\n        console.log(\"starting game \" + gameId);\n        var game = Games.findOne(gameId);\n        game.setStatus(GameStatus.Playing);\n        GameRepository.save(game);\n        return {status: \"success\"};\n    },\n\n    createGame(player1Id, player2Id) {\n        const boardState = [\n            [{player: 0, score: 0}, {player: 0, score: 0}, {player: 0, score: 0}],\n            [{player: 0, score: 0}, {player: 0, score: 0}, {player: 0, score: 0}],\n            [{player: 0, score: 0}, {player: 0, score: 0}, {player: 0, score: 0}]\n        ];\n\n        return new Game({\n            player1: player1Id,\n            player2: player2Id,\n            status: GameStatus.Waiting,\n            playerTurn: 1,\n            player1Scores: 0,\n            player2Scores: 0,\n            boardState: boardState,\n            player1AvailableMoves: GameService.createAvailableMoves(),\n            player2AvailableMoves: GameService.createAvailableMoves(),\n            wonBy: null,\n            creationTime: +new Date()\n        });\n    },\n\n    createAvailableMoves() {\n        var available = [];\n\n        for (var i = 0; i < 3; i++){\n            for (var j = 0; j < 3; j++){\n                available.push({row: i, column: j});\n            }\n        }\n        return available;\n    }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ../app/server/services/GameService.jsx\n **/","import {JoinRequests} from './../collections/JoinRequests.jsx';\n\nexport const JoinRequestRepository = {\n\n  save(joinRequest) {\n    var doc = _.pick(joinRequest, 'from', 'to', 'gameId');\n\n    if (joinRequest._id) {\n      JoinRequests.update(joinRequest._id, {$set: doc});\n    } else {\n      joinRequest._id = JoinRequests.insert(doc);\n    }\n\n    return joinRequest._id;\n  }\n\n};\n\n\n\n\n/** WEBPACK FOOTER **\n ** ../app/server/repositories/JoinRequestRepository.jsx\n **/","import {Kind} from './../../../common/models/Questions.jsx';\nimport {TimelineVerificationService} from './TimelineVerificationService.jsx';\nimport {MultipleChoiceVerificationService} from './MultipleChoiceVerificationService.jsx';\nimport {OrderVerificationService} from './ReorderVerificationService.jsx';\n\nimport {GeoVerificationService} from './GeoVerificationService.jsx';\n\nexport class Answer {\n  \n}\n\nexport class AnswerVerificationService {\n\n    static getVerifiers() {\n      const verifiers = {};\n\n      verifiers[Kind.Timeline]       = TimelineVerificationService;\n      verifiers[Kind.MultipleChoice] = MultipleChoiceVerificationService;\n      verifiers[Kind.Geolocation]    = GeoVerificationService;\n      verifiers[Kind.Order]          = OrderVerificationService;\n\n      return verifiers;\n    }\n\n    static getVerifier(kind) {\n      const verifiers = AnswerVerificationService.getVerifiers();\n      const verifier  = verifiers[kind];\n\n      if (!AnswerVerificationService.isVerifier(verifier)) {\n        return null;\n      }\n\n      return verifier;\n    }\n\n    /**\n     * @param {Tile} tile\n     * @param {[Answer]} answers\n     *\n     * @return {[number]} the array of the results: 0 for incorrect 1 for correct per question\n     */\n    static verifyTile(tile, answers) {\n        const questionAnswers = _.zip(tile.getQuestions(), answers);\n\n        return _.map(questionAnswers, qa => {\n          const kind     = qa[0].getKind();\n          const verifier = AnswerVerificationService.getVerifier(kind);\n\n          if (verifier == null) {\n            console.error(`AnswerVerificationService: Got invalid question kind: ${kind}`);\n            return 0;\n          }\n\n          return verifier.verifyAnswer(qa[0], qa[1]);\n        });\n    }\n\n    static isVerifier(verifier) {\n      return (\n        verifier != null &&\n        typeof verifier.verifyAnswer === 'function'\n      );\n    }\n};\n\n\n\n\n/** WEBPACK FOOTER **\n ** ../app/server/services/verification/AnswerVerificationService.jsx\n **/","import {TimelineUnit} from './../../../common/models/Questions.jsx';\n\nexport class TimelineData {\n\n    /**\n     * @constructor\n     * @param {string} date\n     */\n    constructor(date) {\n        this.date = date;\n    }\n\n    /**\n     * Gives the date as answer given by the user\n     *\n     * @return {Date}\n     */\n    getDate() {\n        return new Date(this.date);\n    }\n}\n\n/**\n * @extends {Answer}\n */\nexport class TimelineAnswer {\n    /**\n     * @constructor\n     * @param {TimelineData}data\n     */\n    constructor(data) {\n        this.data = data\n    }\n    /**\n     * A data object\n     * @type {TimelineData}\n     */\n    getData(){\n        return this.data;\n    }\n}\n\nexport class TimelineVerificationService {\n\n    /**\n     * verifies the timeline answer\n     *\n     * @param {TimelineQuestion} question\n     * @param {TimelineAnswer} answer\n     * @return {number} 0 for incorrect 1 for correct\n     */\n    static verifyAnswer(question, answer) {\n        switch(question.getUnit()) {\n            case TimelineUnit.Day:\n                return moment(answer.getData().getDate()).dayOfYear() === moment(question.getAnswer()).dayOfYear()? 1: 0;\n                break;\n\n            case TimelineUnit.Week:\n                return moment(answer.getData().getDate()).week() === moment(question.getAnswer()).week()? 1: 0;\n                break;\n\n            case TimelineUnit.Month:\n                return moment(answer.getData().getDate()).month() === moment(question.getAnswer()).month()? 1: 0;\n\n                break;\n\n            case TimelineUnit.Year:\n                return moment(answer.getData().getDate()).year() === moment(question.getAnswer()).year()? 1: 0;\n                break;\n\n            default:\n                throw new Meteor.Error(500, `Unknown unit ${question.getUnit()}`);\n        }\n\n    }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ../app/server/services/verification/TimelineVerificationService.jsx\n **/","export class MultipleChoiceData {\n    /**\n     * @constructor\n     * @param {number} choice\n     */\n    constructor(choice) {\n        this.choice = choice;\n    }\n\n\n    /**\n     * the number chosen as answer\n     * @type {number}\n     */\n    getChoice() {\n        return this.choice;\n    }\n}\n\n/**\n * @extends {Answer}\n */\nexport class MultipleChoiceAnswer {\n    /**\n     * @constructor\n     * @param {MultipleChoiceData} data\n     */\n    constructor(data) {\n        this.data = data;\n    }\n    /**\n     * A data object\n     * @type {MultipleChoiceData}\n     */\n    getData(){\n        return this.data;\n    }\n}\n\n\n\nexport const MultipleChoiceVerificationService = {\n\n    /**\n     *\n     * @param {MultipleChoiceQuestion} question\n     * @param {MultipleChoiceAnswer} answer\n     * @returns {number}\n     */\n    verifyAnswer(question, answer) {\n        return question.getAnswer() === answer.getData().getChoice() ? 1 : 0;\n    }\n\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ../app/server/services/verification/MultipleChoiceVerificationService.jsx\n **/","\nexport class OrderItem {\n\n    /**\n     *\n     * @param {number} id\n     * @param {string} title\n     */\n    constructor(id, title) {\n        this._id = id;\n        this._title = title;\n    }\n\n    /**\n     *\n     * @returns {number}\n     */\n\n    get id() {\n        return this._id;\n    }\n\n    /**\n     *\n     * @returns {string}\n     */\n\n    get title() {\n        return this._title;\n    }\n}\n\nexport class OrderData {\n\n    /**\n     *\n     * @param {[OrderItem]} items\n     */\n    constructor(items) {\n        this._items = items;\n    }\n\n    /**\n     * Contains the marker put by the user\n     * @type {[OrderItem]}\n     */\n    get items() {\n        return this._items;\n    }\n}\n\n/**\n * @extends {Answer}\n */\nexport class OrderAnswer {\n\n    /**\n     *\n     * @param {number} timespent timespent in ms\n     * @param {OrderData} data\n     */\n    constructor(timespent, data) {\n        this._timespent = timespent;\n        this._data = data;\n    }\n\n    /**\n     * A data object\n     * @type {OrderData}\n     */\n    get data() {\n        return this._data;\n    }\n}\n\nexport const OrderVerificationService = {\n\n  /**\n   * Verifies if the answer provided is at the correct location\n   *\n   * @param {OrderQuestion} question\n   * @param {OrderAnswer} answer\n   *\n   * @return {boolean}\n   */\n  verifyAnswer(question, answer)\n  {\n        const givenIds   = answer.data.items.map(i => i.id);\n        const answerIds  = question.getAnswer();\n        const right      = _.zip(answerIds, givenIds).map(([answer, given]) => answer === given ? 1 : 0);\n        const correct    = right.reduce((acc, cur) => acc + cur, 0);\n        const numAnswers = answerIds.length;\n\n        console.log(`OrderVerificationService: got ${correct} correct answers over ${numAnswers}`);\n\n        return correct === numAnswers;\n    }\n\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ../app/server/services/verification/ReorderVerificationService.jsx\n **/","\n\nexport class GeoData {\n\n    /**\n     *\n     * @param {Marker} marker\n     */\n    constructor(marker) {\n        this.marker = marker;\n    }\n\n    /**\n     * Contains the marker put by the user\n     * @type {Marker}\n     */\n    getMarker() {\n        return this.marker;\n    }\n};\n\n/**\n * @extends {Answer}\n */\nexport class GeoAnswer {\n\n    /**\n     *\n     * @param {GeoData} data\n     */\n    constructor(data) {\n        this.data = data;\n    }\n    /**\n     * A data object\n     * @type {GeoData}\n     */\n    getData() {\n        return this.data;\n    }\n};\n\nexport class GeoVerificationService {\n    /**\n     * verifies if the answer provided is at the correct location\n     *\n     * @param {GeoQuestion} question\n     * @param {GeoAnswer} answer\n     *\n     * @return {number} 1 for correct answer 0 for incorrect\n     */\n\n        static verifyAnswer(question, answer)  {\n\n\n        const pickedLocation = answer.getData().getMarker();\n        const correctLocation = question.getAnswer();\n\n        const distance = Math.sqrt(\n            Math.pow(pickedLocation.getLatitude() - correctLocation.getLatitude(), 2) +\n            Math.pow(pickedLocation.getLongitude() - correctLocation.getLongitude(), 2));\n\n\n        console.error(\"Geo answer correct\", question.getAnswer());\n        console.error(\"Geo answer given\", answer.getData().getMarker());\n        console.error(\"Geo allowed distance\", question.getRange());\n        console.error(\"Geo actuall distance\", distance);\n        return distance < question.getRange() ? 1 : 0;\n    }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ../app/server/services/verification/GeoVerificationService.jsx\n **/","\nexport class BoardStateService\n{\n\n  constructor(board, playerNum)\n  {\n    this.board  = board;\n    this.player = playerNum;\n  }\n\n  playerWins(player = this.player)\n  {\n    if (this.verifyWonDiagonal(player) || this.verifyWonAntiDiagonal(player)) {\n      return true;\n    }\n\n    for (let i = 0; i < 3; i += 1) {\n      if (this.verifyWonRow(i, player) || this.verifyWonColumn(i, player)) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  playerWinsForRowAndColumn(player, row, column)\n  {\n    return (\n      this.verifyWonRow(row, player) ||\n      this.verifyWonColumn(column, player) ||\n      this.verifyWonDiagonal(player) ||\n      this.verifyWonAntiDiagonal(player)\n    );\n  }\n\n  verifyWonRow(row, player = this.player)\n  {\n    for (let i = 0; i < 3; i += 1) {\n      if (this.board[row][i].player !== player || this.board[row][i].score === 0) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  verifyWonColumn(column, player = this.player)\n  {\n    for (let j = 0; j < 3; j += 1) {\n      if (this.board[j][column].player !== player || this.board[j][column].score === 0) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  verifyWonDiagonal(player = this.player)\n  {\n    for (let i = 0; i < 3; i += 1) {\n      const cell = this.board[i][i];\n\n      if (cell.player !== player || cell.score === 0) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  verifyWonAntiDiagonal(player = this.player)\n  {\n    var y = 2;\n\n    for (let x = 0; x < 3; x += 1) {\n      const cell = this.board[y][x];\n\n      if (cell.player !== player || cell.score === 0) {\n        return false;\n      }\n\n      y -= 1;\n    }\n\n    return true;\n  }\n\n  isDraw(game)\n  {\n    if (game.getPlayerTurn() == 1) {\n      return _.isEmpty(game.getPlayer1AvailableMoves());\n    }\n\n    return _.isEmpty(game.getPlayer2AvailableMoves())\n  }\n\n  checkRows()\n  {\n    var player     = 0;\n    var impossible = 0;\n\n    for (var x = 0; x < this.board.length; x += 1) {\n      for (var y = 0; y < this.board.length; y += 1) {\n        if (this.board[x][y].player !== player){\n          impossible += 1;\n          break;\n        }\n        _.extend(player, this.board[x][y].player);\n      }\n\n    }\n    return impossible;\n  }\n\n  checkColumns()\n  {\n    var player     = 0;\n    var impossible = 0;\n\n    for (var x = 0; x < 3; x += 1) {\n      for (var y = 0; y < 3; y += 1) {\n        const cell = this.board[y][x];\n\n        if (cell.player !== player){\n          impossible += 1;\n          break;\n        }\n\n        _.extend(player, cell.player);\n      }\n\n    }\n\n    return impossible;\n  }\n\n  checkDiagonal()\n  {\n    var player     = 0;\n    var impossible = 0;\n\n    for (var x = 0; x < 3; x += 1) {\n      const cell = this.board[x][x];\n\n      if (player !== 0 && cell.player !== player) {\n        impossible += 1;\n        break;\n      }\n\n      _.extend(player, cell.player);\n\n    }\n\n    return impossible;\n  }\n\n  checkAntiDiagonal()\n  {\n    var player     = 0;\n    var impossible = 0;\n    var y          = 2;\n\n    for (var x = 0; x < 3; x += 1) {\n      const cell = this.board[y][x];\n\n      if (player !== 0 && cell.player !== player) {\n        impossible += 1;\n        break;\n      }\n\n      _.extend(player, cell.player);\n\n      y -= 1;\n    }\n\n    return impossible;\n  }\n\n\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ../app/server/services/BoardStateService.jsx\n **/","import {Gamestats, Gamestat, QuestionTypes} from './../../common/collections/Gamestats.jsx';\nimport {GamestatRepository} from './../repositories/GamestatsRepository.jsx';\n\nexport const GamestatsService = {\n  updateStatsGameWon(userId){\n    const stat = GamestatsService.getStats(userId);\n    stat.setGamesPlayed(stat.getGamesPlayed() + 1);\n    stat.setGamesWon(stat.getGamesWon() + 1);\n    GamestatRepository.save(stat);\n  },\n\n  updateStatsGameLost(userId) {\n    const stat = GamestatsService.getStats(userId);\n    stat.setGamesPlayed(stat.getGamesPlayed() + 1);\n    stat.setGamesLost(stat.getGamesLost() + 1);\n    GamestatRepository.save(stat);\n  },\n\n  updateStatsGameDraw(userId) {\n    const stat = GamestatsService.getStats(userId);\n    stat.setGamesPlayed(stat.getGamesPlayed() + 1);\n    GamestatRepository.save(stat);\n  },\n\n  updateStatsForQuestions(questions, userId, results) {\n\n    const questionsResults = _.zip(questions, results);\n    const stat = GamestatsService.getStats(userId);\n\n    _.forEach(questionsResults, qr => {\n      switch (qr[0].getType()) {\n        case QuestionTypes.MCWhichPageDidYouLike:\n          stat.setMCWhichPageDidYouLikeQuestionsTried(stat.getMCWhichPageDidYouLikeQuestionsTried() + 1);\n          stat.setMCTried(stat.getMCTried() + 1);\n          if (qr[1]) {\n            stat.setMCWhichPageDidYouLikeCorrect(stat.getMCWhichPageDidYouLikeCorrect() + 1);\n            stat.setMCCorrect(stat.getMCCorrect() + 1);\n          }\n          break;\n        case QuestionTypes.MCWhoLikedYourPost:\n          stat.setMCWhoLikedYourPostQuestionsTried(stat.getMCWhoLikedYourPostQuestionsTried() + 1);\n          stat.setMCTried(stat.getMCTried() + 1);\n\n          if (qr[1]) {\n            stat.setMCWhoLikedYourPostCorrect(stat.getMCWhoLikedYourPostCorrect() + 1);\n            stat.setMCCorrect(stat.getMCCorrect() + 1);\n          }\n          break;\n        case QuestionTypes.MCWhoMadeThisCommentOnYourPost:\n          stat.setMCWhoMadeThisCommentOnYourPostQuestionsTried(stat.getMCWhoMadeThisCommentOnYourPostQuestionsTried() + 1);\n          stat.setMCTried(stat.getMCTried() + 1);\n\n          if (qr[1]) {\n            stat.setMCWhoMadeThisCommentOnYourPostCorrect(stat.getMCWhoMadeThisCommentOnYourPostCorrect() + 1);\n            stat.setMCCorrect(stat.getMCCorrect() + 1);\n          }\n          break;\n        case QuestionTypes.TLWhenDidYouShareThisPost:\n          stat.setTLWhenDidYouShareThisPostQuestionsTried(stat.getTLWhenDidYouShareThisPostQuestionsTried() + 1);\n          stat.setTLTried(stat.getTLTried() + 1);\n\n          if (qr[1]) {\n            stat.setTLWhenDidYouShareThisPostCorrect(stat.getTLWhenDidYouShareThisPostCorrect() + 1);\n            stat.setTLCorrect(stat.getTLCorrect() + 1);\n          }\n          break;\n        case QuestionTypes.TLWhenDidYouLikeThisPage:\n          stat.setTLWhenDidYouLikeThisPageQuestionsTried(stat.getTLWhenDidYouLikeThisPageQuestionsTried() + 1);\n          stat.setTLTried(stat.getTLTried() + 1);\n\n          if (qr[1]) {\n            stat.setTLWhenDidYouShareThisPostCorrect(stat.getTLWhenDidYouShareThisPostCorrect() + 1);\n            stat.setTLCorrect(stat.getTLCorrect() + 1);\n          }\n          break;\n        case QuestionTypes.GeoWhatCoordinatesWereYouAt:\n          stat.setGeoWhatCoordinatesWereYouAtQuestionsTried(stat.getGeoWhatCoordinatesWereYouAtQuestionsTried() + 1);\n          stat.setGeoTried(stat.getGeoTried() + 1);\n\n          if (qr[1]) {\n            stat.setGeoWhatCoordinatesWereYouAtCorrect(stat.getGeoWhatCoordinatesWereYouAtCorrect() + 1);\n            stat.setGeoCorrect(stat.getGeoCorrect() + 1);\n          }\n          break;\n        case QuestionTypes.ORDPostLikesNumber:\n          stat.setOrderTried(stat.getOrderTried() + 1);\n\n          if (qr[1]) {\n            stat.setOrderCorrect(stat.getGeoCorrect() + 1);\n          }\n          break;\n\n        case QuestionTypes.ORDPageLike:\n        case QuestionTypes.ORDPageLikes:\n          stat.setOrderTried(stat.getOrderTried() + 1);\n\n          if (qr[1]) {\n            stat.setOrderCorrect(stat.getGeoCorrect() + 1);\n          }\n          break;\n\n        case QuestionTypes.ORDPageLikeTime:\n\n          break;\n\n        case QuestionTypes.ORDPostCommentsNumber:\n          stat.setOrderTried(stat.getOrderTried() + 1);\n\n          if (qr[1]) {\n            stat.setOrderCorrect(stat.getGeoCorrect() + 1);\n          }\n          break;\n\n        case QuestionTypes.ORDPostTime:\n          stat.setOrderTried(stat.getOrderTried() + 1);\n\n          if (qr[1]) {\n            stat.setOrderCorrect(stat.getGeoCorrect() + 1);\n          }\n          break;\n        default:\n          console.error(`Unkown Question type for stats for user: ${userId}, type: ${qr[0].getType()}`);\n          Meteor.Error(500, `Unkown Question type for stats for user: ${userId}, type: ${qr[0].getType()}`);\n      }\n      GamestatRepository.save(stat);\n    });\n  },\n\n  getStats(userId) {\n    var stat = Gamestats.findOne({userId: userId});\n    if (!stat) {\n      stat = new Gamestat({userId: userId});\n    }\n    return stat;\n  }\n};\n\n\n\n\n/** WEBPACK FOOTER **\n ** ../app/server/services/GamestatsService.jsx\n **/","import {assignProps} from './../helpers/assignProps.jsx';\n\nexport const Gamestats = new Mongo.Collection('gamestats', {\n    transform: function(doc){\n        return new Gamestat(doc);\n    }\n});\n\nexport const GamestatProps = ['_id', 'userId', 'gamesPlayed', 'gamesWon', 'gamesLost',\n    'MCWhoLikedYourPostQuestionsTried', 'MCWhoLikedYourPostCorrect',\n    'MCWhoMadeThisCommentOnYourPostQuestionsTried', 'MCWhoMadeThisCommentOnYourPostCorrect',\n    'MCWhichPageDidYouLikeQuestionsTried', 'MCWhichPageDidYouLikeCorrect',\n    'TLWhenDidYouShareThisPostQuestionsTried', 'TLWhenDidYouShareThisPostCorrect',\n    'GeoWhatCoordinatesWereYouAtQuestionsTried', 'GeoWhatCoordinatesWereYouAtCorrect',\n    'MCTried', 'MCCorrect',\n    'TLTried', 'TLCorrect',\n    'GeoTried', 'GeoCorrect',\n    'OrderTried', 'OrderCorrect'\n];\n\nexport const QuestionTypes = {\n    MCWhoLikedYourPost             : 'MCWhoLikedYourPost',\n    MCWhoMadeThisCommentOnYourPost : 'MCWhoMadeThisCommentOnYourPost',\n    MCWhichPageDidYouLike          : 'MCWhichPageDidYouLike',\n    TLWhenDidYouShareThisPost      : 'TLWhenDidYouShareThisPost',\n    TLWhenDidYouLikeThisPage       : 'TLWhenDidYouLikeThisPage',\n    GeoWhatCoordinatesWereYouAt    : 'GeoWhatCoordinatesWereYouAt',\n    ORDPostLikesNumber             : 'ORDPostLikesNumber',\n    ORDPageLike                    : 'ORDPageLike',\n    ORDPageLikes                   : 'ORDPageLikes',\n    ORDPageLikeTime                : 'ORDPageLikeTime',\n    ORDPostCommentsNumber          : 'ORDPostCommentsNumber',\n    ORDPostTime                    : 'ORDPostTime'\n};\n\n\nexport class Gamestat {\n\n    constructor(props) {\n        const diff = _.difference(Object.keys(props), GamestatProps);\n        if (!_.isEmpty(diff)){\n            throw new Meteor.Error(500, \"Game constructor with unusable parameters \" + diff);\n        }\n\n        _.forEach(GamestatProps, p => {\n            if (!props[p] && p !== '_id') {\n                props[p] = 0;\n            }\n        });\n        assignProps(this, GamestatProps, props);\n    }\n\n    getGamesPlayed(){\n        return this.gamesPlayed;\n    }\n    setGamesPlayed(value) {\n        this.gamesPlayed = value;\n    }\n\n    getGamesWon() {\n        return this.gamesWon;\n    }\n\n    setGamesWon(value) {\n        this.gamesWon = value;\n    }\n\n    getGamesLost() {\n        return this.gamesLost;\n    }\n\n    setGamesLost(value) {\n        this.gamesLost = value;\n    }\n\n    getGamesDrawn() {\n      return this.getGamesPlayed() - this.getGamesWon() - this.getGamesLost();\n    }\n\n    getMCWhoLikedYourPostQuestionsTried() {\n        return this.MCWhoLikedYourPostQuestionsTried;\n    }\n\n    setMCWhoLikedYourPostQuestionsTried(value) {\n        this.MCWhoLikedYourPostQuestionsTried = value;\n    }\n\n    getMCWhoLikedYourPostCorrect() {\n        return this.MCWhoLikedYourPostCorrect;\n    }\n\n    setMCWhoLikedYourPostCorrect(value){\n        this.MCWhoLikedYourPostCorrect = value;\n    }\n\n    getMCWhoMadeThisCommentOnYourPostQuestionsTried() {\n        return this.MCWhoMadeThisCommentOnYourPostQuestionsTried;\n    }\n\n    setMCWhoMadeThisCommentOnYourPostQuestionsTried(value) {\n        this.MCWhoMadeThisCommentOnYourPostQuestionsTried = value;\n    }\n\n    getMCWhoMadeThisCommentOnYourPostCorrect() {\n        return this.MCWhoMadeThisCommentOnYourPostCorrect;\n    }\n\n    setMCWhoMadeThisCommentOnYourPostCorrect(value) {\n        this.MCWhoMadeThisCommentOnYourPostCorrect = value;\n    }\n\n    getMCWhichPageDidYouLikeQuestionsTried() {\n        return this.MCWhichPageDidYouLikeQuestionsTried;\n    }\n\n    setMCWhichPageDidYouLikeQuestionsTried(value) {\n        this.MCWhichPageDidYouLikeQuestionsTried = value;\n    }\n\n    getMCWhichPageDidYouLikeCorrect() {\n        return this.MCWhichPageDidYouLikeCorrect;\n    }\n\n    setMCWhichPageDidYouLikeCorrect(value) {\n        this.MCWhichPageDidYouLikeCorrect = value;\n    }\n\n    getTLWhenDidYouShareThisPostQuestionsTried() {\n        return this.TLWhenDidYouShareThisPostQuestionsTried;\n    }\n\n    setTLWhenDidYouShareThisPostQuestionsTried(value) {\n        this.TLWhenDidYouShareThisPostQuestionsTried = value;\n    }\n\n    getTLWhenDidYouLikeThisPageQuestionsTried() {\n        return this.TLWhenDidYouLikeThisPageQuestionsTried;\n    }\n    \n    setTLWhenDidYouLikeThisPageQuestionsTried(value) {\n        this.TLWhenDidYouLikeThisPageQuestionsTried = value;\n    }\n\n    getTLWhenDidYouShareThisPostCorrect() {\n        return this.TLWhenDidYouShareThisPostCorrect;\n    }\n\n    setTLWhenDidYouShareThisPostCorrect(value) {\n        this.TLWhenDidYouShareThisPostCorrect = value;\n    }\n    \n    getTLWhenDidYouLikeThisPageCorrect() {\n        return this.TLWhenDidYouLikeThisPageCorrect;\n    }\n    \n    setTLWhenDidYouLikeThisPageCorrect(value) {\n        this.TLWhenDidYouLikeThisPageCorrect = value;\n    }\n\n    getGeoWhatCoordinatesWereYouAtQuestionsTried() {\n        return this.GeoWhatCoordinatesWereYouAtQuestionsTried;\n    }\n\n    setGeoWhatCoordinatesWereYouAtQuestionsTried(value) {\n        this.GeoWhatCoordinatesWereYouAtQuestionsTried = value;\n    }\n\n    getGeoWhatCoordinatesWereYouAtCorrect() {\n        return this.GeoWhatCoordinatesWereYouAtCorrect;\n    }\n\n    setGeoWhatCoordinatesWereYouAtCorrect(value) {\n        this.GeoWhatCoordinatesWereYouAtCorrect = value;\n    }\n\n    getMCTried() {\n        return this.MCTried;\n    }\n\n    setMCTried(value) {\n        this.MCTried = value;\n    }\n\n    getMCCorrect() {\n        return this.MCCorrect;\n    }\n\n    setMCCorrect(value) {\n        this.MCCorrect = value;\n    }\n\n    getTLTried() {\n        return this.TLTried;\n    }\n\n    setTLTried(value) {\n        this.TLTried = value;\n    }\n\n    getTLCorrect() {\n        return this.TLCorrect;\n    }\n\n    setTLCorrect(value) {\n        this.TLCorrect = value;\n    }\n\n    getGeoTried() {\n        return this.GeoTried;\n    }\n\n    setGeoTried(value) {\n        this.GeoTried = value;\n    }\n\n    getGeoCorrect() {\n        return this.GeoCorrect;\n    }\n\n    setGeoCorrect(value) {\n        this.GeoCorrect = value;\n    }\n\n    getOrderTried() {\n        return this.OrderTried;\n    }\n\n    setOrderTried(value) {\n        this.OrderTried = value;\n    }\n\n    getOrderCorrect() {\n        return this.OrderCorrect;\n    }\n\n    setOrderCorrect(value) {\n        this.OrderCorrect = value;\n    }\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ../app/common/collections/Gamestats.jsx\n **/","import {Gamestats, GamestatProps} from './../../common/collections/Gamestats.jsx';\n\nexport const GamestatRepository = {\n\n\n    save(stat) {\n        const doc = _.pick(stat, ...GamestatProps);\n        if (stat._id) {\n            Gamestats.update(stat._id, doc);\n        } else {\n            stat._id = Gamestats.insert(doc);\n        }\n\n        return stat._id;\n    }\n\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ../app/server/repositories/GamestatsRepository.jsx\n **/","// http://underscorejs.org/docs/underscore.html\n\nfunction createPredicateIndexFinder(dir) {\n  return function(array, predicate, context) {\n    var length = array.length;\n    var index = dir > 0 ? 0 : length - 1;\n    for (; index >= 0 && index < length; index += dir) {\n      if (predicate(array[index], index, array)) return index;\n    }\n    return -1;\n  };\n}\n\nexport const findIndex = createPredicateIndexFinder(1);\n\n\n\n\n/** WEBPACK FOOTER **\n ** ../app/common/helpers/findIndex.jsx\n **/","import {Kind} from './../../common/models/Questions.jsx';\nimport {Games} from './../collections/Games.jsx';\nimport {Marker} from './../../common/models/questions/Marker.jsx';\nimport {GameStatus} from './../../common/models/GameStatus.jsx';\nimport {GameBoardRepository} from './../repositories/GameBoardRepository.jsx';\nimport {GameRepository} from './../repositories/GameRepository.jsx';\nimport {AnswerVerificationService} from './verification/AnswerVerificationService.jsx';\nimport {BoardStateService} from './BoardStateService.jsx';\nimport {GamestatsService} from './GamestatsService.jsx';\nimport {findIndex} from './../../common/helpers/findIndex.jsx';\nimport {MultipleChoiceAnswer, MultipleChoiceData, MultipleChoiceVerificationService} from './verification/MultipleChoiceVerificationService.jsx';\nimport {TimelineAnswer, TimelineData, TimelineVerificationService} from './verification/TimelineVerificationService.jsx';\nimport {GeoAnswer, GeoData, GeoVerificationService} from './verification/GeoVerificationService.jsx';\nimport {OrderAnswer, OrderItem, OrderData} from './verification/ReorderVerificationService.jsx';\n\n\nclass AnswerService {\n\n    timeOut(currentUser, gameId, tileId) {\n      if (gameId == null || tileId == null) {\n        return {\n          status: 'error',\n          message: `Missing arguments for AnswerService.timeOut`\n        };\n      }\n\n      const game = Games.findOne(gameId);\n\n      if (!game) {\n        return {\n          status: 'error',\n          message: `Cannot find game with id ${gameId}`\n        };\n      }\n\n      const board = game.getCurrentBoard();\n\n      if (!board) {\n        return {\n          status: 'error',\n          message: `Cannot find board for current player`\n        };\n      }\n\n      const tile  = board.getTileById(tileId);\n\n      if (!tile) {\n        return {\n          status: 'error',\n          message: `Cannot find tile with id ${tileId}`\n        };\n      }\n\n      tile.setDisabled(true);\n      GameBoardRepository.save(board);\n\n      const currentPlayer = game.getPlayerTurn();\n      const boardState    = game.getBoardState();\n      const boardService  = new BoardStateService(boardState, currentPlayer);\n      const wins          = boardService.playerWins();\n      const draw          = boardService.isDraw(game);\n\n      this.updateStats(game, wins, draw, currentUser, currentPlayer);\n\n      if (wins) {\n        game.setWonBy(currentPlayer);\n        game.setStatus(GameStatus.Ended);\n      }\n      else if (draw) {\n        game.setWonBy(0);\n        game.setStatus(GameStatus.Ended);\n      }\n\n      game.nextTurn();\n      GameRepository.save(game);\n\n      return {\n        status: 'success'\n      };\n    }\n\n    post(currentUser, gameId, tileId, answers)\n    {\n        const game = Games.findOne(gameId);\n\n        if (!game) {\n          throw new Meteor.Error(500, `Cannot find game with id ${gameId}`);\n        }\n\n        const board = game.getCurrentBoard();\n        const tiles = board.getTiles();\n        const tile  = board.getTileById(tileId);\n\n        if (!tile) {\n            throw new Meteor.Error(500, `Cannot find tile with id ${tileId}`);\n        }\n\n        const boardState    = game.getBoardState();\n        const currentPlayer = game.getPlayerTurn();\n        const boardService  = new BoardStateService(boardState, currentPlayer);\n\n        const typedAnswers = this.typeAnswers(tile, answers);\n\n        const result    = AnswerVerificationService.verifyTile(tile, typedAnswers);\n        const questions = tile.getQuestions();\n\n        GamestatsService.updateStatsForQuestions(questions, currentUser, result);\n\n        const scores = _.zip(questions, result).map(([question, score]) => ({\n            questionId: question._id,\n            score: score\n        }));\n      \n        const index = findIndex(tiles, t => t.getId() === tileId);\n        const row   = Math.floor(index / 3);\n        const col   = index % 3;\n\n        const correctAnswersNum = scores.reduce((acc, s) => acc + s.score, 0);\n        const wrongAnswersNum   = questions.length - correctAnswersNum;\n        const otherScore        = boardState[row][col].player !== currentPlayer ? boardState[row][col].score : 0;\n\n        const newScore = correctAnswersNum;\n        game.incrementCurrentPlayerScore(newScore);\n\n        if (newScore > otherScore || otherScore === 0) {\n            const scoreKey = `player${currentPlayer}Scores`;\n            game[scoreKey][tileId] = scores;\n\n            boardState[row][col].player = currentPlayer;\n            boardState[row][col].score  = newScore;\n        }\n\n        tile.setDisabled(true);\n\n        const filterMoves = m => m.row !== row || m.column !== col;\n\n        this.updateMoves(game, newScore, currentPlayer, filterMoves);\n\n        const wins = boardService.playerWinsForRowAndColumn(currentPlayer, row, col);\n        const draw = boardService.isDraw(game);\n\n        this.updateStats(game, wins, draw, currentUser, currentPlayer);\n\n        if (wins) {\n          game.setWonBy(currentPlayer);\n          game.setStatus(GameStatus.Ended);\n        }\n        else if (draw) {\n          game.setWonBy(0);\n          game.setStatus(GameStatus.Ended);\n        }\n\n        game.nextTurn();\n\n        GameRepository.save(game);\n        GameBoardRepository.save(board);\n\n        const returnValue = {\n            status  : 'success',\n            win     : wins,\n            draw    : draw,\n            correct : correctAnswersNum,\n            wrong   : wrongAnswersNum\n        };\n\n        console.log(`Result of player ${currentPlayer} turn:`, returnValue);\n\n        return returnValue;\n    }\n\n    typeAnswers(tile, answers)\n    {\n      const questions = tile.getQuestions();\n\n      return _.zip(questions, answers).map(([q, a]) => this.typeAnswer(q, a));\n    }\n\n    typeAnswer(question, answer) {\n        const kind = question.getKind();\n        const data = answer.data;\n\n        switch (kind) {\n          case Kind.MultipleChoice:\n            return new MultipleChoiceAnswer(new MultipleChoiceData(data.choice));\n\n          case Kind.Timeline:\n            return new TimelineAnswer(new TimelineData(data.date));\n\n          case Kind.Geolocation:\n            return new GeoAnswer(new GeoData(new Marker(data.marker.latitude, data.marker.longitude)));\n\n          case Kind.Order:\n            const items = data.items.map(i => new OrderItem(i.id, i.text));\n            const order = new OrderData(items);\n\n            return new OrderAnswer(answer.timespent, order);\n\n          default:\n            throw Meteor.Error(500, `Unsupported question type ${kind}`);\n        }\n    }\n\n    updateMoves(game, score, player, filterMoves)\n    {\n        const player1AvailableMoves = game.getPlayer1AvailableMoves();\n        const player2AvailableMoves = game.getPlayer2AvailableMoves();\n\n        const player1NewMoves = player1AvailableMoves.filter(filterMoves);\n        const player2NewMoves = player2AvailableMoves.filter(filterMoves);\n\n        if (score === 3) {\n            game.setPlayer1AvailableMoves(player1NewMoves);\n            game.setPlayer2AvailableMoves(player2NewMoves);\n        }\n        else {\n            if (player === 1) {\n                game.setPlayer1AvailableMoves(player1NewMoves);\n            } else {\n                game.setPlayer2AvailableMoves(player2NewMoves);\n            }\n        }\n    }\n\n    updateStats(game, wins, draw, user, player)\n    {\n        if (!wins || !draw) {\n          return;\n        }\n\n        if (game.status === GameStatus.Ended) {\n          return;\n        }\n\n        if (wins) {\n            GamestatsService.updateStatsGameWon(user);\n            GamestatsService.updateStatsGameLost(game.getOpponentForUser(user));\n            game.setWonBy(player);\n        }\n        else if (draw) {\n            GamestatsService.updateStatsGameDraw(user);\n            GamestatsService.updateStatsGameDraw(game.getOpponentForUser(user));\n            game.setWonBy(0);\n        }\n\n        game.setStatus(GameStatus.Ended);\n    }\n\n}\n\nmodule.exports = {\n  AnswerService: new AnswerService()\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ../app/server/services/AnswerService.jsx\n **/","export function setup() {\n\n  var abort = false;\n\n  ['FACEBOOK_APPID',\n    'FACEBOOK_SECRET',\n    'GMAPS_KEY',\n    'TIMEOUT_BETWEEN_FETCHES',\n    'GAME_CREATOR_URL'\n  ].forEach(key => {\n    if (process.env[key] == null) {\n      console.error('ERROR: Missing environement variable %s', key);\n      abort = true;\n    }\n  });\n\n  if (abort) {\n    process.exit(1);\n  }\n\n  const appId = process.env.FACEBOOK_APPID;\n  const secret = process.env.FACEBOOK_SECRET;\n  const gmapsKey = process.env.GMAPS_KEY;\n\n\n  ServiceConfiguration.configurations.upsert(\n      {service: 'facebook'},\n      {\n        $set: {\n          loginStyle: 'popup',\n          appId: appId,\n          secret: secret,\n          scope: ['public_profile', 'user_friends', 'email', 'user_likes', 'user_photos', 'user_posts', 'user_status', 'user_tagged_places']\n        }\n      }\n  );\n\n  ServiceConfiguration.configurations.upsert(\n      {service: 'gmaps'},\n      {\n        $set: {\n          zoom: 9,\n          apiKey: gmapsKey,\n          sensor: false,\n          marker: {\n            initialPosition: {\n              latitude: 46.5285085,\n              longitude: 6.5601122\n            }\n          }\n        }\n      }\n  );\n\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ../app/server/services.jsx\n **/","\nimport {FriendRepository} from './repositories/FriendRepository.jsx'\n\n// FIXME: Awful design...\n// TODO: Handle paging.\n// TODO: Fix caching.\nconst API_URL = 'https://graph.facebook.com/v2.3';\n\nclass Facebook {\n\n  constructor() {\n    this.usersInfo = {};\n    this.avatars = {};\n  }\n\n\n  getAppSecret() {\n    var conf = ServiceConfiguration.configurations.findOne({service: 'facebook'});\n    return conf.secret;\n  }\n\n  computeProof(accessToken) {\n    return CryptoJS.HmacSHA256(accessToken, this.getAppSecret()).toString();\n  }\n  \n  api(user, url, options = {}) {\n    if (!user) {\n      throw new Meteor.Error(500, \"You must specify the current user\");\n    }\n\n    var fullUrl = API_URL + url;\n    var accessToken = user.services.facebook.accessToken;\n\n    if (!accessToken) {\n      throw new Meteor.Error(401, \"User isn't logged in or doesn't have an access token\");\n    }\n\n    /* eslint camelcase:0 */\n    var params = _.extend(options, {\n      access_token: accessToken,\n      appsecret_proof: this.computeProof(accessToken)\n    });\n\n    try {\n      var res = HTTP.get(fullUrl, { params });\n\n      if (res.statusCode !== 200) {\n        // TODO: Handle errors.\n      }\n      return res.data;\n    }\n    catch (e) {\n      return {error: e};\n    }\n  }\n\n  getFriends(user) {\n    return this.api(user, '/me/friends').data;\n  }\n\n  getUserInfo(user, fbUserId) {\n    var key = `${user._id}/${fbUserId}`;\n    if (this.usersInfo.hasOwnProperty(key)) {\n      return this.usersInfo[key];\n    }\n\n    var userInfo = this.api(user, '/' + fbUserId);\n    this.usersInfo[key] = userInfo;\n    return userInfo;\n  }\n\n  getAvatar(user, fbUserId, type = 'small') {\n    var key = `${user._id}/${fbUserId}`;\n    if (this.avatars.hasOwnProperty(key)) {\n      return this.avatars[key];\n    }\n\n    var picture = this.api(user, `/${fbUserId}/picture`, {\n      redirect: false,\n      type: type\n    }).data;\n\n    var url = picture.url;\n    this.avatars[key] = url;\n    return url;\n  }\n\n  getPermissions(user) {\n    return this.api(user, '/me/permissions').data;\n  }\n\n}\n\n\n\nmodule.exports = {\n  Facebook: new Facebook()\n};\n\n\n\n\n/** WEBPACK FOOTER **\n ** ../app/server/facebook.jsx\n **/","import {Friends} from './../../common/collections/Friends.jsx';\nimport {FriendProps} from './../../common/models/Friend.jsx';\nimport {UserRepository} from './UserRepository.jsx';\n\nexport const FriendRepository = {\n\n    friendsOf(userId) {\n        return Friends.find({ friendOf: userId }).fetch();\n    },\n\n    byFacebookId(facebookId, userId) {\n        return Friends.findOne({ facebookId: facebookId, friendOf: userId });\n    },\n \n    byUserId(friendUserId, userId) {\n        return Friends.findOne({ userId: friendUserId, friendOf: userId });\n    },\n\n    save(friend) {\n        const doc = _.pick(friend, ...FriendProps);\n\n        if (!doc.userId) {\n            FriendRepository.updateUserId(doc);\n        }\n\n        if (friend._id) {\n            Friends.update(friend._id, doc);\n        }\n        else {\n            friend._id = Friends.insert(doc);\n        }\n\n        return friend;\n    },\n\n    updateUserId(friend) {\n        const user = UserRepository.byFacebookId(friend.facebookId);\n\n        if (user == null) {\n          return false;\n        }\n\n        friend.userId = user._id;\n        return true;\n    },\n\n    updateFriends(userId, friends) {\n        return friends.map(f => {\n            var friend = FriendRepository.byFacebookId(f.id, userId);\n\n            if (friend == null) {\n                friend = {\n                    facebookId: f.id,\n                    friendOf: userId,\n                    name: f.name,\n                    isBot: !!f.isBot,\n                    userId: null\n                };\n            }\n            else {\n                FriendRepository.updateUserId(friend);\n            }\n\n            return FriendRepository.save(friend);\n        });\n    },\n\n    addBot(userId, bot) {\n        var friend = FriendRepository.byUserId(bot.id, userId);\n\n        if (friend != null) {\n            return;\n        }\n\n        friend = {\n            facebookId: bot.id,\n            userId: bot.id,\n            friendOf: userId,\n            name: bot.name,\n            isBot: true\n        };\n\n        FriendRepository.save(friend);\n    }\n\n};\n\n\n\n\n/** WEBPACK FOOTER **\n ** ../app/server/repositories/FriendRepository.jsx\n **/","\nexport const UserRepository = {\n\n    byFacebookId(facebookId) {\n        return Meteor.users.findOne({ 'services.facebook.id': facebookId });\n    }\n\n};\n\n\n\n\n/** WEBPACK FOOTER **\n ** ../app/server/repositories/UserRepository.jsx\n **/","\nconst LOG_PUBLISH = true;\n\nimport {Games} from './collections/Games.jsx';\nimport {GameBoards} from './collections/GameBoards.jsx';\nimport {Friends} from './../common/collections/Friends.jsx';\nimport {JoinRequests} from './collections/JoinRequests.jsx';\nimport {Gamestats} from './../common/collections/Gamestats.jsx';\n\nexport function publishCollections() {\n    \"use strict\";\n    Meteor.publish('games', function() {\n        LOG_PUBLISH && console.log(`Publishing games for user ${this.userId}...`);\n\n        return Games.find({\n            $or: [\n                { player1: this.userId },\n                { player2: this.userId }\n            ]\n        });\n    });\n\n    Meteor.publish('gameBoards', function() {\n        LOG_PUBLISH && console.log(`Publishing game boards for user ${this.userId}...`);\n\n        return GameBoards.find({ userId: this.userId });\n    });\n\n    Meteor.publish('joinRequests', function() {\n        LOG_PUBLISH && console.log(`Publishing join requests for user ${this.userId}...`);\n\n        return JoinRequests.find({ to: this.userId });\n    });\n\n// TODO: Don't publish access token etc.\n    Meteor.publish('userServices', function() {\n        LOG_PUBLISH && console.log(`Publishing services for user ${this.userId}...`);\n\n        return Meteor.users.find({ _id: this.userId }, { fields: { 'services': 1 } });\n    });\n\n    Meteor.publish('friends', function() {\n        LOG_PUBLISH && console.log(`Publishing friends for user ${this.userId}...`);\n\n        return Friends.find({ friendOf: this.userId });\n    });\n\n    Meteor.publish('gameStats', function() {\n        LOG_PUBLISH && console.log(`Publishing game stats for user ${this.userId}...`);\n        return Gamestats.find();\n    });\n}\n\n\n\n\n\n/** WEBPACK FOOTER **\n ** ../app/server/publish.jsx\n **/","import {JoinRequestService} from './services/JoinRequestService.jsx';\nimport {GameService} from './services/GameService.jsx';\nimport {AnswerService} from './services/AnswerService.jsx';\nimport {GameCreatorService} from './services/GameCreatorService.jsx';\nimport {Facebook} from './facebook.jsx';\nimport {FriendRepository} from './repositories/FriendRepository.jsx';\n\nexport function setupMeteorMethods() {\n  Meteor.methods({\n\n    fetchData(userId) {\n      check(userId, String);\n\n      Server.fetchData(userId);\n\n      return {\n        status: 'success'\n      };\n    },\n\n    'Account.deleteAllData'() {\n      const userId   = Meteor.userId();\n\n      console.log(`Deleting data for user: ${userId}`);\n\n      const user     = Meteor.users.findOne(userId);\n      const fbUserId = user.services.facebook.id;\n\n      const result = AccountService.deleteUserData(fbUserId);\n\n      if (result.statusCode === 200) {\n        Meteor.users.remove(userId);\n      }\n\n      console.log('Data deleted with following result:', result.data.message);\n\n      return {\n        status: result.statusCode === 200 ? 'success' : 'error',\n        msg: result.data.message\n      };\n    },\n\n    'JoinRequest.decline'(requestId) {\n      check(requestId, String);\n\n      return JoinRequestService.decline(requestId);\n    },\n\n    'JoinRequest.accept'(requestId) {\n      check(requestId, String);\n\n      return JoinRequestService.accept(requestId);\n    },\n\n    'JoinRequest.send'(friendId) {\n      check(friendId, String);\n\n      return JoinRequestService.send(this.userId, friendId);\n    },\n\n    'Game.start'(gameId) {\n      check(gameId, String);\n\n      return GameService.start(gameId);\n    },\n\n    'Game.quit'(gameId) {\n      check(gameId, String);\n\n      console.error('Method Game.quit is not implemented yet.');\n      return {\n        status: 'success'\n      };\n    },\n\n    'Answer.timeOut'(gameId, tileId) {\n      check(gameId, String);\n      check(tileId, String);\n\n      return AnswerService.timeOut(this.userId, gameId, tileId);\n    },\n\n    'Answer.post'(gameId, tileId, answers) {\n      check(gameId, String);\n      check(tileId, String);\n\n      return AnswerService.post(this.userId, gameId, tileId, answers);\n    },\n\n    'Build.info'() {\n      try {\n        const result = GameCreatorService.fetchBuildInfo();\n        const data = (result.data != null) ? result.data : JSON.parse(result.content);\n\n        return {\n          status: 'success',\n          data: data\n        };\n      } catch (e) {\n        console.error(`ERROR: Couldn't get build informations: ${e}`);\n        return {\n          status: 'error',\n          error: e\n        };\n      }\n    },\n    \n    'Facebook.getUserInfo'(userId) {\n      this.unblock();\n      var user = Meteor.users.findOne(this.userId);\n      return Facebook.getUserInfo(user, userId);\n    },\n\n    'Facebook.getAvatar'(facebookId, type) {\n      this.unblock();\n      var user = Meteor.users.findOne(this.userId);\n      return Facebook.getAvatar(user, facebookId, type);\n    },\n\n    'Facebook.getFriends'() {\n      this.unblock();\n      const user = Meteor.users.findOne(this.userId);\n      const friends = FriendRepository.friendsOf(this.userId);\n\n      // TODO: Figure out when to refresh friends from Facebook\n      if (friends && friends.length > 0) {\n        return friends;\n      }\n      const fbFriends = Facebook.getFriends(user);\n      return FriendRepository.updateFriends(this.userId, fbFriends);\n    },\n\n    'Facebook.getPermissions'() {\n      this.unblock();\n      var user = Meteor.users.findOne(this.userId);\n      return Facebook.getPermissions(user);\n    }\n  });\n\n\n\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ../app/server/methods.jsx\n **/"],"sourceRoot":""}